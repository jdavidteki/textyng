{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/jdavid/Documents/textyng/src/components/RecordModal/RecordModal.js\";\nimport React from 'react';\nimport { Recorder, Waveform } from 'react-record';\nimport Firebase from \"../../firebase/firebase.js\";\nimport \"./RecordModal.css\";\nfunction RecordModal(props) {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    isRecording = _React$useState2[0],\n    setIsRecording = _React$useState2[1];\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    audioUrl = _React$useState4[0],\n    setAudioUrl = _React$useState4[1];\n  function handleStartRecording() {\n    setIsRecording(true);\n  }\n  function handleStopRecording(blob) {\n    setIsRecording(false);\n    setAudioUrl(blob.blobURL);\n    var milliseconds = Math.floor(Date.now() / 1000);\n    var bucket = Firebase.storage().ref(props.msgType.replace(/ /g, \"\") + \"/\");\n    var audioFile = new File([blob.blob], milliseconds + 'audio.mp3', {\n      type: 'audio/mp3'\n    });\n    bucket.child('Voice Notes').put(audioFile).then(function (snapshot) {\n      console.log('Audio uploaded to Firebase');\n      bucket.child('Voice Notes').getDownloadURL().then(function (url) {\n        props.getVNURL(url);\n      });\n    });\n  }\n  return React.createElement(\"div\", {\n    className: \"record-modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, isRecording ? React.createElement(Recorder, {\n    onStop: handleStopRecording,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }) : React.createElement(\"button\", {\n    onClick: handleStartRecording,\n    className: \"record-button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, \"Start recording\"), audioUrl && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, React.createElement(\"audio\", {\n    src: audioUrl,\n    controls: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }), React.createElement(Waveform, {\n    audioUrl: audioUrl,\n    width: 500,\n    height: 100,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  })));\n}\nexport default RecordModal;","map":{"version":3,"names":["React","Recorder","Waveform","Firebase","RecordModal","props","useState","isRecording","setIsRecording","audioUrl","setAudioUrl","handleStartRecording","handleStopRecording","blob","blobURL","milliseconds","Math","floor","Date","now","bucket","storage","ref","msgType","replace","audioFile","File","type","child","put","then","snapshot","console","log","getDownloadURL","url","getVNURL"],"sources":["/Users/jdavid/Documents/textyng/src/components/RecordModal/RecordModal.js"],"sourcesContent":["import React from 'react';\nimport { Recorder, Waveform } from 'react-record';\nimport Firebase from \"../../firebase/firebase.js\";\n\nimport './RecordModal.css';\n\nfunction RecordModal(props) {\n  const [isRecording, setIsRecording] = React.useState(false);\n  const [audioUrl, setAudioUrl] = React.useState(null);\n\n  function handleStartRecording() {\n    setIsRecording(true);\n  }\n\n  function handleStopRecording(blob) {\n    setIsRecording(false);\n    setAudioUrl(blob.blobURL);\n    const milliseconds = Math.floor(Date.now() / 1000)\n    const bucket = Firebase.storage().ref(props.msgType.replace(/ /g, \"\") + \"/\");\n\n    // Upload the audio to Firebase\n    const audioFile = new File([blob.blob], milliseconds + 'audio.mp3', {\n        type: 'audio/mp3'\n    });\n\n    bucket.child('Voice Notes').put(audioFile).then(snapshot => {\n        console.log('Audio uploaded to Firebase');\n        bucket.child('Voice Notes').getDownloadURL().then(url => {\n          props.getVNURL(url)\n        });\n    });\n\n  }\n\n  return (\n    <div className=\"record-modal\">\n      {isRecording ? (\n        <Recorder onStop={handleStopRecording} />\n      ) : (\n        <button onClick={handleStartRecording} className=\"record-button\">\n          Start recording\n        </button>\n      )}\n      {audioUrl && (\n        <div>\n          <audio src={audioUrl} controls />\n          <Waveform audioUrl={audioUrl} width={500} height={100} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default RecordModal;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,QAAQ,QAAQ,cAAc;AACjD,OAAOC,QAAQ;AAEf;AAEA,SAASC,WAAW,CAACC,KAAK,EAAE;EAC1B,sBAAsCL,KAAK,CAACM,QAAQ,CAAC,KAAK,CAAC;IAAA;IAApDC,WAAW;IAAEC,cAAc;EAClC,uBAAgCR,KAAK,CAACM,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA7CG,QAAQ;IAAEC,WAAW;EAE5B,SAASC,oBAAoB,GAAG;IAC9BH,cAAc,CAAC,IAAI,CAAC;EACtB;EAEA,SAASI,mBAAmB,CAACC,IAAI,EAAE;IACjCL,cAAc,CAAC,KAAK,CAAC;IACrBE,WAAW,CAACG,IAAI,CAACC,OAAO,CAAC;IACzB,IAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAAC;IAClD,IAAMC,MAAM,GAAGjB,QAAQ,CAACkB,OAAO,EAAE,CAACC,GAAG,CAACjB,KAAK,CAACkB,OAAO,CAACC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC;IAG5E,IAAMC,SAAS,GAAG,IAAIC,IAAI,CAAC,CAACb,IAAI,CAACA,IAAI,CAAC,EAAEE,YAAY,GAAG,WAAW,EAAE;MAChEY,IAAI,EAAE;IACV,CAAC,CAAC;IAEFP,MAAM,CAACQ,KAAK,CAAC,aAAa,CAAC,CAACC,GAAG,CAACJ,SAAS,CAAC,CAACK,IAAI,CAAC,UAAAC,QAAQ,EAAI;MACxDC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;MACzCb,MAAM,CAACQ,KAAK,CAAC,aAAa,CAAC,CAACM,cAAc,EAAE,CAACJ,IAAI,CAAC,UAAAK,GAAG,EAAI;QACvD9B,KAAK,CAAC+B,QAAQ,CAACD,GAAG,CAAC;MACrB,CAAC,CAAC;IACN,CAAC,CAAC;EAEJ;EAEA,OACE;IAAK,SAAS,EAAC,cAAc;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAC1B5B,WAAW,GACV,oBAAC,QAAQ;IAAC,MAAM,EAAEK,mBAAoB;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,GAEzC;IAAQ,OAAO,EAAED,oBAAqB;IAAC,SAAS,EAAC,eAAe;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,qBAGjE,EACAF,QAAQ,IACP;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE;IAAO,GAAG,EAAEA,QAAS;IAAC,QAAQ;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,EACjC,oBAAC,QAAQ;IAAC,QAAQ,EAAEA,QAAS;IAAC,KAAK,EAAE,GAAI;IAAC,MAAM,EAAE,GAAI;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CAE5D,CACG;AAEV;AAEA,eAAeL,WAAW"},"metadata":{},"sourceType":"module"}