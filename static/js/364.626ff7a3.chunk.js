"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[364],{2364:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(2982),r=n(5671),o=n(3144),i=n(136),s=n(2963),c=n(1120),l=n(4687),u=n.n(l),d=n(9526),f=n(7586),h=n(4579);function m(e,t){var n="undefined"!==typeof Symbol&&e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}NodeList.prototype.shuffle=function(){for(var e=Array.from(this),t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e};var y=function(e){(0,i.default)(s,e);var t=v(s);function s(){var e;(0,r.default)(this,s);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={models:[],activeModel:null,chatInput:"",chats:[],placeholder:"do you even have any hidha?"},e.int1=null,e.int2=null,e.handleModelClick=function(t){e.setState({activeModel:t,placeholder:"say something to "+t.name+"..."})},e.handleChatInput=function(t){e.setState({chatInput:t.target.value})},e.handleSendMessage=function(){var t,r,o,i,s,c,l,d,h,m,p,v,y,g,w,b;return u().async((function(S){for(;;)switch(S.prev=S.next){case 0:if(t=e.state,r=t.activeModel,!(o=t.chatInput).startsWith("y:")){S.next=6;break}return i={name:o.slice(2),description:o.slice(2),image:"",friends:"everything",dateCreated:(new Date).toLocaleDateString("en-US")},S.next=5,u().awrap(f.default.createFyld(i).then((function(t){e.setState({chatInput:"thanks, created "+i.name+"!"}),setTimeout((function(){e.setState({chatInput:""})}),3e3)})));case 5:return S.abrupt("return");case 6:return r||(r={name:"anything",description:"anything",image:"https://i.imgur.com/3Zo7z6S.png",friends:"everything",dateCreated:"2022-02-28"},e.setState({activeModel:r,placeholder:"say something to anything..."})),s={sender:"user",message:o},e.setState((function(e){return{chats:[].concat((0,a.default)(e.chats),[s]),chatInput:""}})),S.next=12,u().awrap(f.default.getOpenAIAPI());case 12:return c=S.sent,l=Array.isArray(c)?c.join(""):c,d=n(4653),h=d.Configuration,m=d.OpenAIApi,delete(p=new h({apiKey:l})).baseOptions.headers["User-Agent"],v="MUST READ NOTE: The person chatting with you thinks they are talking to\n                    "+r.name+". Please interact with them as if you were \n                    "+r.name+" and chat with them. This is your conversation history with them\n                    \n\n"+e.state.chats+"\n\nUser: "+s+"\nAI:",y=new m(p),S.next=21,u().awrap(y.createCompletion({model:"text-davinci-003",prompt:v,max_tokens:150,n:1,stop:["\nUser:","AI:"]}));case 21:g=S.sent,w=g.data.choices[0].text.trim(),b={sender:"ai",message:w},e.setState((function(e){return{chats:[].concat((0,a.default)(e.chats),[b])}}));case 25:case"end":return S.stop()}}),null,null,null,Promise)},e}return(0,o.default)(s,[{key:"componentDidMount",value:function(){var e,t,n,a,r,o,i,s,c,l,d,m=this;return u().async((function(p){for(;;)switch(p.prev=p.next){case 0:return(0,h.MoveSunInSky)(),p.next=3,u().awrap(f.default.getFylds().then((function(e){m.setState({models:e})})));case 3:for(this.int1=setInterval((function(){f.default.getFylds().then((function(e){m.setState({models:e})}))}),5e3),e=window.innerWidth,t=window.innerHeight,n=e>776?150:50,100,a=Math.floor(e*t/(100*n*4)),r=document.querySelectorAll(".cloud").shuffle(),o=Math.min(r.length,a),i=0;i<o;i++)s=5*Math.random(),c=100*Math.random(),l=90*Math.random(),r[i].style.animationDelay=s+"s",r[i].style.left=c+"%",r[i].style.top=l+"%";for(d=o;d<r.length;d++)r[d].style.display="none";this.int2=setInterval((function(){m.manageClouds(r,o)}),2e3);case 14:case"end":return p.stop()}}),null,this,null,Promise)}},{key:"componentWillUnmount",value:function(){clearInterval(this.int1),clearInterval(this.int2)}},{key:"manageClouds",value:function(e,t){var n;e[Math.floor(Math.random()*t)].style.display="none";for(var a,r=m(e);!(a=r()).done;){var o=a.value;if("none"===o.style.display){n=o;break}}if(n){var i=5*Math.random(),s=100*Math.random(),c=90*Math.random();n.style.display="inline",n.style.animationDelay=i+"s",n.style.left=s+"%",n.style.top=c+"%"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.models,a=t.activeModel,r=t.chatInput,o=t.chats,i=n.map((function(t){return d.createElement("div",{key:t.name,className:"cloud",onClick:function(){return e.handleModelClick(t)}},t.name)})),s=null;return null!==a&&(s=d.createElement("div",{className:"chat-popup"},d.createElement("div",{className:"chat-close",onClick:function(){return e.setState({activeModel:null,placeholder:"do you even have any hidha?",chatInput:""})}},"X"),d.createElement("div",{className:"chat-header"},"Hello, my name is "+a.name+". What's going on?"),d.createElement("div",{className:"chat-messages"},o.map((function(e,t){return"user"===e.sender?d.createElement("div",{key:t,className:"chat-message user"},e.message):d.createElement("div",{key:t,className:"chat-message ai"},e.message)}))))),d.createElement("div",{className:"Fylds"},d.createElement("div",{className:"cloud-container"},i),d.createElement("div",{className:"Fylds-searchbar"},d.createElement("input",{className:"chat-input",type:"text",placeholder:this.state.placeholder,value:r,onChange:this.handleChatInput}),d.createElement("button",{className:"chat-send-button",onClick:this.handleSendMessage},"Send")),s)}}]),s}(d.Component);const g=y},7586:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(3144),r=n(5671),o=n(2805),i=n.n(o);const s=new((0,a.default)((function e(){(0,r.default)(this,e),this.getScripts=function(){return new Promise((function(e){i().database().ref("/scripts/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getFylds=function(){return new Promise((function(e){i().database().ref("/fylds/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.createFyld=function(e){return new Promise((function(t){i().database().ref("/fylds/"+e.name.replace(/\s/g,"")+"/").set({name:e.name,dateCreated:e.dateCreated,description:e.description,image:e.image,friends:e.friends}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createNewScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").set({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").update({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,scenes:e.scenes,readerReactionMap:e.readerReactionMap,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.getOpenAIAPI=function(){return new Promise((function(e){i().database().ref("/openAIAPI/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getConversationHistory=function(){return new Promise((function(e){i().database().ref("/conversationHistory/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.postChats=function(e,t,n,a,r){return new Promise((function(o){i().database().ref("/chats/"+e+"/"+a+"/"+t+"/").push({content:n,timestamp:Date.now(),uid:r}).then((function(){o(!0)})).catch((function(e){o({})}))}))},this.storage=function(){return i().storage()},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getScriptById=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e).once("value").then((function(e){e.val()?t(Object(e.val())):t({})}))}))},this.updateSenTitle=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/").update({senTitle:e.newSenTitle}).then((function(n){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId).remove().then((function(){t(!0)})).catch((function(e){console.log("error",e)}))})).then((function(e){t(!0)})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("error",e)}))}))},this.sendForApproval=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId+"/").set(e).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateVideoSnippetURL=function(e,t){return new Promise((function(n){i().database().ref("/orders/"+e+"/").update({snippetVideoURL:t}).then((function(e){console.log("response",e),n(!0)})).catch((function(e){console.log("error",e)}))}))}})))}}]);
//# sourceMappingURL=364.626ff7a3.chunk.js.map