(self.webpackChunkweb=self.webpackChunkweb||[]).push([[225],{7225:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var r=n(4942),a=n(2982),o=n(5671),s=n(3144),c=n(136),i=n(2963),u=n(1120),l=n(4687),f=n.n(l),d=n(9526),p=n(7586);n(586);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var g=n(4653),y=g.Configuration,b=g.OpenAIApi,w=function(e){(0,c.default)(n,e);var t=v(n);function n(e){var r;return(0,o.default)(this,n),(r=t.call(this,e)).componentDidMount=function(){return f().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f().awrap(r.CreateOpenAIModel());case 2:case"end":return e.stop()}}),null,null,null,Promise)},r.CreateOpenAIModel=function(){var e,t,n,a;return f().async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,f().awrap(p.default.getOpenAIAPI());case 2:e=o.sent,t=Array.isArray(e)?e.join(""):e,delete(n=new y({apiKey:t})).baseOptions.headers["User-Agent"],a=new b(n),r.setState({openai:a});case 8:case"end":return o.stop()}}),null,null,null,Promise)},r.handleChatMessage=function(){var e,t,n,o,s,c,i,u;return f().async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=r.state,t=e.chatMessages,n=e.chatInput,o={role:"user",content:n},s=[].concat((0,a.default)(t),[o]),t.length||s.push(r.state.initialMsg),r.setState({chatMessages:s,chatInput:""}),l.next=7,f().awrap(r.state.openai.createChatCompletion({model:"gpt-3.5-turbo",messages:s}));case 7:c=l.sent,i=c.data.choices[0].message.content,u={role:"assistant",content:i},r.setState((function(e){return{chatMessages:[].concat((0,a.default)(e.chatMessages),[u])}})),r.searchResponseForGrpcht(i);case 12:case"end":return l.stop()}}),null,null,null,Promise)},r.state={grypcht:{groupName:"",members:[],dateCreated:""},chatInput:"",chatMessages:[],isComplete:!1,openai:null,initialMsg:{role:"assistant",content:"You are assisting in creating a Grypcht JSON object. \n                The object should include the following fields: groupName (string), \n                members (array), and dateCreated (string), and description (string),\n                isPrivateGrypcht (boolean). Please interact with the user to get the values of each field and update \n                the Grypcht object accordingly. Once the user confirms that the object \n                is complete, return the validated JSON object. Please make it as \n                interactive as possible."}},r}return(0,s.default)(n,[{key:"searchResponseForGrpcht",value:function(e){var t,n=this,r=this.state.grypcht,a=e.indexOf("{"),o=e.lastIndexOf("}"),s=e.substring(a,o+1);console.log("Extracted JSON substring:",e);try{t=JSON.parse(s);var c=m(m({},r),t),i=Math.floor(9e5*Math.random())+1e5;c.id=i,p.default.createGrypcht(c).then((function(){n.setState({isComplete:!0,grypcht:c}),window.history.pushState(null,"","/grypcht/"+i),window.location.reload()}))}catch(u){return void console.error("Failed to parse JSON from AI response:",u)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.grypcht,r=t.chatMessages;return t.isComplete?d.createElement("div",null,d.createElement("h2",null,"Grypcht Created!"),d.createElement("p",null,"Group Name: ",n.groupName),d.createElement("p",null,"Members: ",n.members.join(", ")),d.createElement("p",null,"Date Created: ",n.dateCreated)):d.createElement("div",{className:"GrypchtAddData l-container"},d.createElement("h2",null,"Create Grypcht"),d.createElement("div",null,d.createElement("h3",null,"Chat"),r.map((function(t,n){return t!==e.state.initialMsg?d.createElement("p",{key:n},t.role,": ",t.content):null}))),d.createElement("div",null,d.createElement("input",{type:"text",value:this.state.chatInput,onChange:function(t){return e.setState({chatInput:t.target.value})}}),d.createElement("button",{onClick:function(){return e.handleChatMessage()}},"Send")))}}]),n}(d.Component);const P=w},7586:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(3144),a=n(5671),o=n(2805),s=n.n(o);const c=new((0,r.default)((function e(){(0,a.default)(this,e),this.getScripts=function(){return new Promise((function(e){s().database().ref("/scripts/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getFylds=function(){return new Promise((function(e){s().database().ref("/fylds/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.createFyld=function(e){return new Promise((function(t){s().database().ref("/fylds/"+e.name.replace(/\s/g,"")+"/").set({name:e.name,dateCreated:e.dateCreated,description:e.description,image:e.image,friends:e.friends}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createGrypcht=function(e){return new Promise((function(t){s().database().ref("/grypchts/"+e.id+"/").set({id:e.id,groupName:e.groupName,members:e.members,dateCreated:e.dateCreated,description:e.description,isPrivateGrypcht:e.isPrivateGrypcht}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createNewScript=function(e){return new Promise((function(t){s().database().ref("/scripts/"+e.id+"/").set({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateScript=function(e){return new Promise((function(t){s().database().ref("/scripts/"+e.id+"/").update({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,scenes:e.scenes,readerReactionMap:e.readerReactionMap,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.getOpenAIAPI=function(){return new Promise((function(e){s().database().ref("/openAIAPI/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getConversationHistory=function(){return new Promise((function(e){s().database().ref("/conversationHistory/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getRimiSenTitles=function(){return new Promise((function(e){s().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.postChats=function(e,t,n,r,a){return new Promise((function(o){s().database().ref("/chats/"+e+"/"+r+"/"+t+"/").push({content:n,timestamp:Date.now(),uid:a}).then((function(){o(!0)})).catch((function(e){o({})}))}))},this.storage=function(){return s().storage()},this.getRimiSenTitles=function(){return new Promise((function(e){s().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getScriptById=function(e){return new Promise((function(t){s().database().ref("/scripts/"+e).once("value").then((function(e){e.val()?t(Object(e.val())):t({})}))}))},this.updateSenTitle=function(e){return new Promise((function(t){s().database().ref("/rimis/"+e.id+"/").update({senTitle:e.newSenTitle}).then((function(n){return new Promise((function(t){s().database().ref("/rimis/"+e.id+"/updates/"+e.updateId).remove().then((function(){t(!0)})).catch((function(e){console.log("error",e)}))})).then((function(e){t(!0)})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("error",e)}))}))},this.sendForApproval=function(e){return new Promise((function(t){s().database().ref("/rimis/"+e.id+"/updates/"+e.updateId+"/").set(e).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateVideoSnippetURL=function(e,t){return new Promise((function(n){s().database().ref("/orders/"+e+"/").update({snippetVideoURL:t}).then((function(e){console.log("response",e),n(!0)})).catch((function(e){console.log("error",e)}))}))}})))},586:(e,t,n)=>{var r=n(6589),a=n(2708),o=a;o.v1=r,o.v4=a,e.exports=o},8726:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,a=t;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},6338:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},6589:(e,t,n)=>{var r,a,o=n(6338),s=n(8726),c=0,i=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:a;if(null==f||null==d){var p=o();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=a=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:i+1,v=h-c+(m-i)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||h>c)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,i=m,a=d;var g=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=f[b];return t||s(l)}},2708:(e,t,n)=>{var r=n(6338),a=n(8726);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var c=0;c<16;++c)t[o+c]=s[c];return t||a(s)}}}]);
//# sourceMappingURL=225.a2f66316.chunk.js.map