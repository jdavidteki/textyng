"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[364],{2364:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(2982),s=n(5671),r=n(3144),i=n(136),c=n(2963),o=n(1120),u=n(4687),l=n.n(u),d=n(9526),h=n(7586);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,o.default)(e);if(t){var s=(0,o.default)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,i.default)(c,e);var t=f(c);function c(){var e;(0,s.default)(this,c);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={models:[],activeModel:null,chatInput:"",chats:[],placeholder:"do you even have any idea?"},e.int1=null,e.handleModelClick=function(t){e.setState({activeModel:t,placeholder:"say something to "+t.name+"..."})},e.handleChatInput=function(t){e.setState({chatInput:t.target.value})},e.handleSendMessage=function(){var t,s,r,i,c,o,u,d,f,m,p,v,g,y,w,b;return l().async((function(S){for(;;)switch(S.prev=S.next){case 0:if(t=e.state,s=t.activeModel,!(r=t.chatInput).startsWith("y:")){S.next=6;break}return i={name:r.slice(2),description:r.slice(2),image:"",friends:"everything",dateCreated:(new Date).toLocaleDateString("en-US")},S.next=5,l().awrap(h.default.createFyld(i).then((function(t){e.setState({chatInput:"thanks, created "+i.name+"!"}),setTimeout((function(){e.setState({chatInput:""})}),3e3)})));case 5:return S.abrupt("return");case 6:return s||(s={name:"anything",description:"anything",image:"https://i.imgur.com/3Zo7z6S.png",friends:"everything",dateCreated:"2022-02-28"},e.setState({activeModel:s,placeholder:"say something to anything..."})),c={sender:"user",message:r},e.setState((function(e){return{chats:[].concat((0,a.default)(e.chats),[c]),chatInput:""}})),S.next=12,l().awrap(h.default.getOpenAIAPI());case 12:return o=S.sent,u=Array.isArray(o)?o.join(""):o,d=n(4653),f=d.Configuration,m=d.OpenAIApi,delete(p=new f({apiKey:u})).baseOptions.headers["User-Agent"],v="MUST READ NOTE: The person chatting with you thinks they are talking to\n                    "+s.name+". Please interact with them as if you were \n                    "+s.name+" and chat with them. This is your conversation history with them\n                    \n\n"+e.state.chats+"\n\nUser: "+c+"\nAI:",g=new m(p),S.next=21,l().awrap(g.createCompletion({model:"text-davinci-003",prompt:v,max_tokens:150,n:1,stop:["\nUser:","AI:"]}));case 21:y=S.sent,w=y.data.choices[0].text.trim(),b={sender:"ai",message:w},e.setState((function(e){return{chats:[].concat((0,a.default)(e.chats),[b])}}));case 25:case"end":return S.stop()}}),null,null,null,Promise)},e}return(0,r.default)(c,[{key:"componentDidMount",value:function(){var e,t,n,a,s,r,i,c,o,u,d,f=this;return l().async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,l().awrap(h.default.getFylds().then((function(e){f.setState({models:e})})));case 2:for(this.int1=setInterval((function(){h.default.getFylds().then((function(e){f.setState({models:e})}))}),5e3),e=window.innerWidth,t=window.innerHeight,n=e>776?150:50,100,a=Math.floor(e*t/(100*n*4)),s=document.querySelectorAll(".cloud"),r=Math.min(s.length,a),i=0;i<r;i++)c=5*Math.random(),o=100*Math.random(),u=90*Math.random(),s[i].style.animationDelay=c+"s",s[i].style.left=o+"%",s[i].style.top=u+"%";for(d=r;d<s.length;d++)s[d].style.display="none";case 12:case"end":return m.stop()}}),null,this,null,Promise)}},{key:"componentWillUnmount",value:function(){clearInterval(this.int1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.models,a=t.activeModel,s=t.chatInput,r=t.chats,i=n.map((function(t){return d.createElement("div",{key:t.name,className:"cloud",onClick:function(){return e.handleModelClick(t)}},t.name)})),c=null;return null!==a&&(c=d.createElement("div",{className:"chat-popup"},d.createElement("div",{className:"chat-close",onClick:function(){return e.setState({activeModel:null,placeholder:"do you even have any idea?",chatInput:""})}},"X"),d.createElement("div",{className:"chat-header"},"Hello, my name is "+a.name+". What's going on?"),d.createElement("div",{className:"chat-messages"},r.map((function(e,t){return"user"===e.sender?d.createElement("div",{key:t,className:"chat-message user"},e.message):d.createElement("div",{key:t,className:"chat-message ai"},e.message)}))))),d.createElement("div",{className:"Fylds"},d.createElement("div",{className:"cloud-container"},i),d.createElement("div",{className:"Fylds-searchbar"},d.createElement("input",{className:"chat-input",type:"text",placeholder:this.state.placeholder,value:s,onChange:this.handleChatInput}),d.createElement("button",{className:"chat-send-button",onClick:this.handleSendMessage},"Send")),c)}}]),c}(d.Component);const p=m},7586:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(3144),s=n(5671),r=n(2805),i=n.n(r);const c=new((0,a.default)((function e(){(0,s.default)(this,e),this.getScripts=function(){return new Promise((function(e){i().database().ref("/scripts/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getFylds=function(){return new Promise((function(e){i().database().ref("/fylds/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.createFyld=function(e){return new Promise((function(t){i().database().ref("/fylds/"+e.name.replace(/\s/g,"")+"/").set({name:e.name,dateCreated:e.dateCreated,description:e.description,image:e.image,friends:e.friends}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createNewScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").set({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").update({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,scenes:e.scenes,readerReactionMap:e.readerReactionMap,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.getOpenAIAPI=function(){return new Promise((function(e){i().database().ref("/openAIAPI/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getConversationHistory=function(){return new Promise((function(e){i().database().ref("/conversationHistory/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.postChats=function(e,t,n,a,s){return new Promise((function(r){i().database().ref("/chats/"+e+"/"+a+"/"+t+"/").push({content:n,timestamp:Date.now(),uid:s}).then((function(){r(!0)})).catch((function(e){r({})}))}))},this.storage=function(){return i().storage()},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getScriptById=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e).once("value").then((function(e){e.val()?t(Object(e.val())):t({})}))}))},this.updateSenTitle=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/").update({senTitle:e.newSenTitle}).then((function(n){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId).remove().then((function(){t(!0)})).catch((function(e){console.log("error",e)}))})).then((function(e){t(!0)})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("error",e)}))}))},this.sendForApproval=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId+"/").set(e).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateVideoSnippetURL=function(e,t){return new Promise((function(n){i().database().ref("/orders/"+e+"/").update({snippetVideoURL:t}).then((function(e){console.log("response",e),n(!0)})).catch((function(e){console.log("error",e)}))}))}})))}}]);
//# sourceMappingURL=364.ac5cb288.chunk.js.map