(()=>{"use strict";var e={1050:(e,t,a)=>{a.r(t);var n=a(9526),s=a(3961),r=a(5671),i=a(3144),c=a(136),o=a(2963),l=a(1120),u=a(565),d=a(9934);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var f=function(e){(0,c.default)(a,e);var t=m(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={catSelected:"textyng",findMeIconHover:"#6c47db"},n}return(0,i.default)(a,[{key:"render",value:function(){return n.createElement("div",{className:"Footer-default"},n.createElement("div",{className:"frame-142"},n.createElement("div",{className:"Footer-greeting"},"everything is a message")))}}]),a}(n.Component);const h=f,p=a.p+"static/media/logo.c63653a9ea048846f65e.png";function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=g(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={catSelected:"textyng"},n}return(0,i.default)(a,[{key:"handleCategoryClick",value:function(e){this.setState({createIconHover:"black",meCardsIconHover:"black"}),"readerview"==e?this.setState({createIconHover:"#DCB69A"}):"mecards"==e&&this.setState({meCardsIconHover:"#DCB69A"}),this.props.changePage(e)}},{key:"componentDidMount",value:function(){var e=window.location.pathname;this.setState({createIconHover:e.includes("readerview/")?"#DCB69A":"black",meCardsIconHover:e.includes("mecards/")?"#DCB69A":"black"});var t=document.getElementById("Header-logo");setInterval((function(){var e=Math.floor(2001*Math.random())+1e3;setTimeout((function(){var e=t.style.borderRadius;t.style.borderRadius="25%"===e?"0":"25%"}),e)}),4e3)}},{key:"render",value:function(){var e,t,a=this;return n.createElement("div",{className:"Header"},n.createElement("div",{className:"Header-logoWrapper",onClick:function(){return a.handleCategoryClick("textyng")}},n.createElement("img",{id:"Header-logo",className:"Header-logo",src:p,alt:"textyng.me.logo"})),n.createElement("div",{className:"Header-mainMenu"},n.createElement("div",{className:"Header-mainMenu-item Header-icon",onClick:function(){return a.handleCategoryClick("searchscripts")}},(e="createIcon",t=this.state.createIconHover,"createIcon"==e?n.createElement("svg",{"data-name":"Layer 1",fill:t,xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 60 60"},n.createElement("defs",null),n.createElement("title",null,"Thinking"),n.createElement("g",{id:"TSizNs.tif"},n.createElement("path",{className:"cls-1",d:"M55.3,36.65v.9l0,.15c-.05.33-.08.67-.15,1a8.41,8.41,0,0,1-1.81,3.38,9.42,9.42,0,0,1-2.13,1.85.23.23,0,0,0-.11.24c0,.2,0,.4.07.6a9.07,9.07,0,0,1-.2,3.07,5.4,5.4,0,0,1-1.57,2.77,8.37,8.37,0,0,1-3.88,1.84,4.68,4.68,0,0,0-1.58.32.56.56,0,0,0-.2.17c-.22.33-.4.69-.63,1a7.5,7.5,0,0,1-2,2,8.09,8.09,0,0,1-3,1.06l-1.17.22H35.63L35,57.18a5.8,5.8,0,0,1-2.8-1.31l-.24-.2-.13.12a5.83,5.83,0,0,1-2.72,1.35c-.25,0-.51.08-.77.11h-.83l-.17,0c-.59-.08-1.19-.12-1.78-.24a7.53,7.53,0,0,1-2.55-1,7.82,7.82,0,0,1-2.84-3.19.36.36,0,0,0-.34-.22,10.57,10.57,0,0,1-3.49-.85,5.59,5.59,0,0,1-3.18-3.38,9.15,9.15,0,0,1-.28-4.19.23.23,0,0,0-.11-.27,11,11,0,0,1-2.4-2.16,7.22,7.22,0,0,1-1.66-5.53,9.36,9.36,0,0,1,1.39-4c.12-.2.32-.38.34-.59s-.14-.42-.23-.63a20.7,20.7,0,0,1-1.39-6,13.6,13.6,0,0,1,.43-4.58A10.33,10.33,0,0,1,12,15.88a10.87,10.87,0,0,1,4.9-2.78.3.3,0,0,0,.21-.17c.25-.45.48-.92.77-1.34a10.77,10.77,0,0,1,5.4-4,14,14,0,0,1,5.57-.77A5.64,5.64,0,0,1,31,7.32c.36.18.69.4,1.05.61l0,0a5.38,5.38,0,0,1,3-1.12,12.72,12.72,0,0,1,3,.12A12.37,12.37,0,0,1,42.62,8.4a10.09,10.09,0,0,1,4.32,4.54.3.3,0,0,0,.18.15,22.44,22.44,0,0,1,2.17.8,10.26,10.26,0,0,1,5.47,6.78,13.2,13.2,0,0,1,.38,3.6,15.32,15.32,0,0,1-.42,3.63,22.7,22.7,0,0,1-1.13,3.44.59.59,0,0,0,0,.6,9.43,9.43,0,0,1,1.55,3.81C55.23,36.05,55.26,36.35,55.3,36.65ZM40.16,51.87,40,51.75a6.3,6.3,0,0,1-2.42-3A8.41,8.41,0,0,1,37,45.4a2,2,0,0,1,4-.11c0,.42,0,.85.07,1.26a2.79,2.79,0,0,0,1.36,2.07,2.28,2.28,0,0,0,1.6.25,6.39,6.39,0,0,0,2.1-.68,2.58,2.58,0,0,0,1.41-2.38,7.73,7.73,0,0,0-.34-2.08,1.93,1.93,0,0,1,0-1,2,2,0,0,1,1.15-1.33,5.39,5.39,0,0,0,2.18-1.68,4.41,4.41,0,0,0,.81-3.24A5.32,5.32,0,0,0,51,35l-.14.11c-.4.33-.8.68-1.22,1a9.32,9.32,0,0,1-6.92,1.8,2.21,2.21,0,0,1-1.46-.67,1.84,1.84,0,0,1-.35-2A1.82,1.82,0,0,1,42.65,34a6.44,6.44,0,0,1,.86.09,5.23,5.23,0,0,0,2.72-.56,10.28,10.28,0,0,0,3.37-2.74,3.27,3.27,0,0,0,.5-.69,15.28,15.28,0,0,0,1.31-5.56,8.75,8.75,0,0,0-1.09-4.72,6.55,6.55,0,0,0-4.92-3.38A2,2,0,0,1,43.7,15a3.25,3.25,0,0,0-.23-.54,7,7,0,0,0-2.77-2.68,9.92,9.92,0,0,0-5.55-1.15.86.86,0,0,0-.8.59,4.88,4.88,0,0,0-.2.65,11.53,11.53,0,0,0-.21,2.49V51.17a5.62,5.62,0,0,0,0,.58,1.61,1.61,0,0,0,.73,1.32,1.69,1.69,0,0,0,.89.27c.54,0,1.08-.06,1.61-.09a4.65,4.65,0,0,0,2.28-.81A8.66,8.66,0,0,0,40.16,51.87Zm-26.73-23c.35-.16.68-.33,1-.47a10.22,10.22,0,0,1,3.22-.75,13.17,13.17,0,0,1,3.38.19c.63.12,1.25.33,1.88.45a2,2,0,0,1,1.57,2,1.94,1.94,0,0,1-2.13,1.83,8.56,8.56,0,0,1-.83-.23,10.88,10.88,0,0,0-4-.25,5.17,5.17,0,0,0-3.67,1.92,5.65,5.65,0,0,0-1.24,3.63A4.27,4.27,0,0,0,14,40.24a6.17,6.17,0,0,0,1.75,1.15,1.93,1.93,0,0,1,1.07,2.33,6.42,6.42,0,0,0-.34,2.3A2.54,2.54,0,0,0,17,47.46a3.43,3.43,0,0,0,1.68,1.08,8.26,8.26,0,0,0,2.61.39,2,2,0,0,1,1.08.3,2.25,2.25,0,0,1,.92,1.39,3.23,3.23,0,0,0,1.65,2.05,6,6,0,0,0,2.26.64,5.31,5.31,0,0,0,1.49,0A1.51,1.51,0,0,0,30,52a4.21,4.21,0,0,0,.06-.79q0-18.36,0-36.7c0-.68-.05-1.36-.1-2a4.13,4.13,0,0,0-.34-1.34.78.78,0,0,0-.65-.48,9.22,9.22,0,0,0-3.1.18,8.44,8.44,0,0,0-4.69,2.72A3.91,3.91,0,0,0,20.3,15a1.69,1.69,0,0,1-.79,1.06,2,2,0,0,1-.76.35c-.23,0-.46.09-.68.14a6.39,6.39,0,0,0-2.69,1.28,7.82,7.82,0,0,0-2.8,5.66,10.68,10.68,0,0,0,.1,2.46A14.58,14.58,0,0,0,13.43,28.82Z"}),n.createElement("path",{className:"cls-1",d:"M46.77,28.09a8.52,8.52,0,0,1-6.43-2.61,9.19,9.19,0,0,1-2-3.28,14.79,14.79,0,0,1-.53-1.9A1.91,1.91,0,0,1,39.46,18a2,2,0,0,1,2.26,1.69,6.5,6.5,0,0,0,1.84,3.55,3.31,3.31,0,0,0,2.07.94,6.86,6.86,0,0,0,1.81-.09A1.94,1.94,0,1,1,47.79,28C47.42,28,47,28.07,46.77,28.09Z"}),n.createElement("path",{className:"cls-1",d:"M18.37,35.87a2.68,2.68,0,0,1,1,.25A10,10,0,0,1,23,38.44a10.53,10.53,0,0,1,2.29,3.48,12.52,12.52,0,0,1,.86,3.47,1.94,1.94,0,0,1-3.81.68c-.07-.32-.05-.67-.09-1a6,6,0,0,0-2.88-4.7,7.77,7.77,0,0,0-1.55-.71,1.9,1.9,0,0,1-1.38-1.76A1.93,1.93,0,0,1,18.37,35.87Z"}),n.createElement("path",{className:"cls-1",d:"M20.77,24.11a2.57,2.57,0,0,1-1.26-.19,1.94,1.94,0,0,1,.83-3.7,5.66,5.66,0,0,0,1.79-.2,3.08,3.08,0,0,0,2.1-2.34,2,2,0,0,1,2-1.59,2,2,0,0,1,1.82,2.48,7,7,0,0,1-5.29,5.26A8.63,8.63,0,0,1,20.77,24.11Z"}))):"findMeIcon"==e?n.createElement("svg",{"data-name":"Layer 1",fill:t,xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 60 60"},n.createElement("defs",null),n.createElement("title",null,"Connection"),n.createElement("path",{className:"cls-1",d:"M32,25.56a8.87,8.87,0,1,1,8.86-8.86A8.87,8.87,0,0,1,32,25.56ZM32,11.7a5,5,0,1,0,5,5A5,5,0,0,0,32,11.7Z"}),n.createElement("path",{className:"cls-1",d:"M14.28,54.07a8.86,8.86,0,1,1,8.86-8.86A8.86,8.86,0,0,1,14.28,54.07Zm0-13.85a5,5,0,1,0,5,5A5,5,0,0,0,14.28,40.22Z"}),n.createElement("path",{className:"cls-1",d:"M49.72,54.07a8.86,8.86,0,1,1,8.86-8.86A8.87,8.87,0,0,1,49.72,54.07Zm0-13.85a5,5,0,1,0,5,5A5,5,0,0,0,49.72,40.22Z"}),n.createElement("rect",{className:"cls-1",x:"39.83",y:"20.42",width:"4",height:"19.68",transform:"translate(-9.47 24.46) rotate(-29.43)"}),n.createElement("rect",{className:"cls-1",x:"13.3",y:"28.26",width:"19.68",height:"4",transform:"translate(-14.59 35.55) rotate(-60.57)"}),n.createElement("rect",{className:"cls-1",x:"21.5",y:"43.21",width:"21",height:"4"})):"mecardsIcon"==e?n.createElement("svg",{"data-name":"Layer 1",fill:t,xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 60 60"},n.createElement("defs",null),n.createElement("title",null,"Work"),n.createElement("g",{id:"iQFwDU.tif"},n.createElement("path",{className:"cls-1",d:"M54.09,53.15H44.18s-.07-.06-.12-.07a2.53,2.53,0,0,1-2-2.68V45.11H11.64A3.47,3.47,0,0,1,7.91,42a.9.9,0,0,0-.08-.21V39.74a1.3,1.3,0,0,1,1.37-.68c.87,0,1.75,0,2.67,0V15a6.27,6.27,0,0,1,0-.75,3.58,3.58,0,0,1,2.18-3.12c.21-.09.43-.16.64-.24H48.24a2.67,2.67,0,0,0,.26.09,4.31,4.31,0,0,1,3.63,4.52V27h.53a10.63,10.63,0,0,1,1.13,0,2.63,2.63,0,0,1,2.38,2.08v22A3,3,0,0,1,54.09,53.15ZM17.94,35H42.09v-.53c0-1.62,0-3.24,0-4.86A2.52,2.52,0,0,1,44.7,27h1.35V16.92H17.94ZM50.1,27c0-.11,0-.17,0-.23,0-3.93,0-7.87,0-11.8a1.9,1.9,0,0,0-.46-1.09,2.87,2.87,0,0,0-2.35-1H15.44A1.43,1.43,0,0,0,14,14.07a3.71,3.71,0,0,0-.1.94q0,11.75,0,23.5c0,.17,0,.33,0,.5H42.05V37H17.25c-1.06,0-1.38-.31-1.38-1.37V16.25c0-1,.32-1.36,1.35-1.36H47.15a.93.93,0,0,1,.93.78,3.56,3.56,0,0,1,.05.65V27Zm4,6.08h-10v14h10ZM42.06,41.1H9.85c.12,1.58.53,2,2,2H42.06Zm12.11,8H44.12a.53.53,0,0,0,0,.13v1c0,.71.16.88.89.88h8.44c.42,0,.72-.17.74-.62S54.17,49.63,54.17,49.15Zm0-18.19a1.19,1.19,0,0,0,0-.2c0-.31,0-.63,0-.94,0-.66-.18-.84-.83-.84H44.76c-.37,0-.63.15-.66.52s0,1,0,1.46Z"}),n.createElement("path",{className:"cls-1",d:"M54.17,53.63H44l-.12-.08a3,3,0,0,1-2.31-3.15V45.59h-30a3.94,3.94,0,0,1-4.18-3.47l-.1-.3v-2.2l.06-.11a1.79,1.79,0,0,1,1.81-.93c.6,0,1.2,0,1.82,0h.35V14.84a4.11,4.11,0,0,1,0-.7,4,4,0,0,1,2.46-3.49l.46-.17.37-.11H48.33l.18.07.09,0a4.8,4.8,0,0,1,4,5v11H53a7.85,7.85,0,0,1,.84,0,3.12,3.12,0,0,1,2.79,2.42l0,.14,0,22.15a3.48,3.48,0,0,1-2.39,2.39Zm-9.85-1H54A2.5,2.5,0,0,0,55.69,51V29.15a2.15,2.15,0,0,0-1.94-1.69c-.24,0-.48,0-.73,0H51.65v-12a3.82,3.82,0,0,0-3.26-4.05l-.24-.08H14.81l-.13,0-.42.16a3.1,3.1,0,0,0-1.89,2.74,5.43,5.43,0,0,0,0,.57v24.7h-1.3c-.64,0-1.26,0-1.88,0a.84.84,0,0,0-.86.35v1.83a1,1,0,0,1,.07.23,3,3,0,0,0,3.26,2.69H42.56V50.4a2.05,2.05,0,0,0,1.64,2.22Zm7.55-1H45c-1,0-1.37-.38-1.37-1.36l0-1.18.1-.36.38-.06H54.65v.91c0,.33,0,.66,0,1a1.11,1.11,0,0,1-1.22,1.07Zm-.52-1h2.07c.26,0,.26-.06.26-.16a8.58,8.58,0,0,0,0-.88H44.56v.64a1.17,1.17,0,0,0,0,.38s.07,0,.38,0Zm3.28-3.11h-11v-15h11Zm-10-1h9.07V33.52H44.6Zm-2.06-3.06H11.89c-1.77,0-2.38-.58-2.52-2.4l0-.51H42.54Zm-32.16-2c.13.87.42,1,1.51,1H41.58v-1Zm32.15-2.09H13.44l0-.61c0-.12,0-.24,0-.37q0-11.74,0-23.5a4.9,4.9,0,0,1,.11-1,1.91,1.91,0,0,1,1.9-1.58H47.3A3.35,3.35,0,0,1,50,13.53a2.46,2.46,0,0,1,.57,1.39c0,3.15,0,6.29,0,9.43v2.38a1.37,1.37,0,0,1,0,.19l-.05.43-.44.09H47.65V16.33a2.5,2.5,0,0,0,0-.55.46.46,0,0,0-.48-.4H17.22c-.77,0-.87.1-.87.88v19.4c0,.79.1.89.9.89H42.53Zm-28.18-1H41.58v-1H17.25c-1.32,0-1.86-.54-1.86-1.85V16.25c0-1.3.53-1.83,1.83-1.83h30a1.4,1.4,0,0,1,1.37,1.16,3.33,3.33,0,0,1,.07.75V26.48h1V24.35c0-3.14,0-6.28,0-9.42a1.4,1.4,0,0,0-.35-.79,2.39,2.39,0,0,0-2-.82H15.47a1,1,0,0,0-1,.85,3.58,3.58,0,0,0-.09.83V38.53Zm28.21-3.06H17.46v-19H46.53v11H44.7a2.05,2.05,0,0,0-2.13,2.14v5.87Zm-24.15-.95h23.2V29.6a3,3,0,0,1,3.09-3.1h.88V17.4H18.41Zm35.73-3.08H43.61v-.92c0-.36,0-.71,0-1.05a1,1,0,0,1,1.13-1h8.59c.91,0,1.3.39,1.31,1.32v.95c0,.05,0,.1,0,.19l-.07.4Zm-9.58-1h9.13q0-.33,0-.66c0-.26,0-.33,0-.34s-.07,0-.31,0H44.75a.68.68,0,0,0-.17,0C44.55,29.85,44.56,30.16,44.56,30.48Z"}))):void 0),n.createElement("span",{className:"Header-img-title"},"scripts"))))}}]),a}(n.Component);const y=v;var N=a(2246),S=a(2805),E=a.n(S);const M=new((0,i.default)((function e(){(0,r.default)(this,e),this.getScripts=function(){return new Promise((function(e){E().database().ref("/scripts/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.createNewScript=function(e){return new Promise((function(t){E().database().ref("/scripts/"+e.id+"/").set({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateScript=function(e){return new Promise((function(t){E().database().ref("/scripts/"+e.id+"/").update({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,scenes:e.scenes,readerReactionMap:e.readerReactionMap,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.getRimiSenTitles=function(){return new Promise((function(e){E().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.postChats=function(e,t,a,n,s){return new Promise((function(r){E().database().ref("/chats/"+e+"/"+n+"/"+t+"/").push({content:a,timestamp:Date.now(),uid:s}).then((function(){r(!0)})).catch((function(e){r({})}))}))},this.storage=function(){return E().storage()},this.getRimiSenTitles=function(){return new Promise((function(e){E().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getScriptById=function(e){return new Promise((function(t){E().database().ref("/scripts/"+e).once("value").then((function(e){e.val()?t(Object(e.val())):t({})}))}))},this.updateSenTitle=function(e){return new Promise((function(t){E().database().ref("/rimis/"+e.id+"/").update({senTitle:e.newSenTitle}).then((function(a){return new Promise((function(t){E().database().ref("/rimis/"+e.id+"/updates/"+e.updateId).remove().then((function(){t(!0)})).catch((function(e){console.log("error",e)}))})).then((function(e){t(!0)})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("error",e)}))}))},this.sendForApproval=function(e){return new Promise((function(t){E().database().ref("/rimis/"+e.id+"/updates/"+e.updateId+"/").set(e).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateVideoSnippetURL=function(e,t){return new Promise((function(a){E().database().ref("/orders/"+e+"/").update({snippetVideoURL:t}).then((function(e){console.log("response",e),a(!0)})).catch((function(e){console.log("error",e)}))}))}})));function w(e,t){var a="undefined"!==typeof Symbol&&e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=(0,i.default)((function e(t){(0,r.default)(this,e),this.data=t,this.next=null}));const R=function(){function e(t){(0,r.default)(this,e);var a=Math.floor(Date.now()/1e3);this.name=t,this.dateCreated=a,this.id=t+a,this.cast=[],this.crew=[],this.scenes=[],this.head=null,this.messages=new k,this.node={},this.totalNoMsgs=0,this.readerReactionMap=new Map,this.isPrivateScript=!1}return(0,i.default)(e,[{key:"updateScriptName",value:function(e){this.name=e,this.updateIsPrivateScript()}},{key:"updateIsPrivateScript",value:function(){this.name.startsWith("yyyy")&&(this.isPrivateScript=!0)}},{key:"numberOfMessages",value:function(){for(var e=0,t=this.head;t;)e++,t=t.next;return e}},{key:"getScenes",value:function(){return this.scenes}},{key:"updateReaderReaction",value:function(e,t){this.readerReactionMap.has(t)||this.readerReactionMap.set(t,[]),this.readerReactionMap.get(t).push(e),this.updateScriptFirebase()}},{key:"getReaderReactionMap",value:function(){return this.readerReactionMap}},{key:"getTotalNumScenes",value:function(){return this.getScenes().length}},{key:"deleteScript",value:function(){this.head=null}},{key:"getLastMessage",value:function(){for(var e=this.head;e.next;)e=e.next;return e.data.content}},{key:"getFirstMessage",value:function(){return this.head}},{key:"addNewMessage",value:function(e){this.totalNoMsgs+=1,e.MsgIndex=this.totalNoMsgs;var t=new k(e);if(!this.head)return this.head=t,this.head;for(var a=this.head;a.next;)a=a.next;a.next=t}},{key:"deleteMessage",value:function(e){if(this.head.data.id===e)this.head=this.head.next;else for(var t=this.head;t.next;){if(t.next.data.id===e){t.next=t.next.next;break}t=t.next}return this.head}},{key:"getNthMessage",value:function(e){e-=1;for(var t=this.head,a=0;a<e;a++){if(!t)return"";t=t.next}return t.data.content}},{key:"getNthMessageNode",value:function(e){e-=1;for(var t=this.head,a=0;a<e;a++){if(!t.next)return"";t=t.next}return t?t.data:null}},{key:"getAllMessagesStringList",value:function(){for(var e=[],t=this.head;t;)e.push(t.data.content),t=t.next;return e}},{key:"getAllMessagesStringListBySenderId",value:function(e){for(var t=[],a=this.head;a;)a.data.senderId==e&&t.push(a.data),a=a.next;return t}},{key:"getOnlyTextMsgsAsNodes",value:function(){for(var e=[],t=this.head;t;)"textMsg"==t.data.msgType&&e.push(t.data),t=t.next;return e}},{key:"getOnlyCommentsAsNodes",value:function(){for(var e=[],t=this.head;t;)"comment"==t.data.msgType&&e.push(t.data),t=t.next;return e}},{key:"getCommentByCastIdMsgId",value:function(e,t){var a=this.getOnlyCommentsAsNodes().find((function(a){return a.whoCommentedMsg===e&&a.idOfMsgCommented===t}));return a?a.content:""}},{key:"getCommentNodeByCastIdMsgId",value:function(e,t){return this.getOnlyCommentsAsNodes().find((function(a){return a.whoCommentedMsg===e&&a.idOfMsgCommented===t}))}},{key:"editNodeContent",value:function(e,t){for(var a=this.head;a;){if(a.data.id===e){a.data.content=t;break}a=a.next}this.updateScriptFirebase()}},{key:"getOnlyLikedMsgsAsNodes",value:function(){for(var e=[],t=this.head;t;)"like"==t.data.msgType&&e.push(t.data),t=t.next;return e}},{key:"getAllMessagesAsNodes",value:function(){for(var e=[],t=this.head;t;)e.push(t.data),t=t.next;return e}},{key:"getSenderNameFromID",value:function(e){var t=this.getAllCast().concat(this.getAllCrew()).find((function(t){return t.id===e}));return t?t.name:""}},{key:"sendScriptToFirebase",value:function(){var e={id:this.id,name:this.name,dateCreated:this.dateCreated,cast:this.getAllCast(),crew:this.getAllCrew(),messages:this.getAllMessagesAsNodes(),scenes:this.getAllScenes(),isPrivateScript:this.isPrivateScript};M.createNewScript(e)}},{key:"updateCast",value:function(e){this.cast=e}},{key:"updateScene",value:function(e){this.scenes=e}},{key:"updateScriptFirebase",value:function(){var e={id:this.id,name:this.name,dateCreated:this.dateCreated,cast:this.getAllCast(),crew:this.getAllCrew(),messages:this.getAllMessagesAsNodes(),scenes:this.getAllScenes(),readerReactionMap:JSON.stringify(Object.fromEntries(this.readerReactionMap)),isPrivateScript:this.isPrivateScript};M.updateScript(e)}},{key:"removeCast",value:function(e){var t=[];this.cast.forEach((function(a){a.id!=e.id&&t.push(a)})),this.cast=t}},{key:"addNewCrew",value:function(e){this.crew.push(e)}},{key:"getAllCast",value:function(){return this.cast}},{key:"getAllScenes",value:function(){return this.scenes}},{key:"getCastIdToName",value:function(){for(var e,t=new Map,a=w(this.getAllCast);!(e=a()).done;){var n=e.value;t.set(n.id,n.name)}return t}},{key:"getAllCrew",value:function(){return this.crew}},{key:"removeCrew",value:function(e){var t=[];this.crew.forEach((function(a){a.id!=e.id&&t.push(a)})),this.crew=t}},{key:"getScriptName",value:function(){return this.name}},{key:"grabScriptFromFirebase",value:function(e){var t=this;return new Promise((function(a){M.getScriptById(e).then((function(e){if(e.messages)for(var a=e.messages,n=0;n<a.length;n++)t.addNewMessage(a[n]);var s=new Map;if(e.readerReactionMap){var r=JSON.parse(e.readerReactionMap);s=new Map(Object.entries(r))}t.name=e.name,t.dateCreated=e.dateCreated,t.id=e.id,t.cast=e.cast?e.cast:[],t.crew=e.crew?e.crew:[],t.scenes=e.scenes?e.scenes:[],t.readerReactionMap=s,t.isPrivateScript=!!e.isPrivateScript&&e.isPrivateScript})).then((function(){a(t)}))}))}},{key:"getNodeByMessageId",value:function(e){for(var t=this.head;t;){if(t.data.id===e)return t;t=t.next}return null}},{key:"getMsgType",value:function(e){var t=getNodeByMessageId(e);return t.msgType?t.msgType:"textMsg"}}]),e}();var I=a(1498),b=a(885);const A=function(e){var t="textyng";e.name&&(t=e.name);var a=n.useState(t),s=(0,b.default)(a,2),r=s[0],i=s[1],c=n.useState(!1),o=(0,b.default)(c,2),l=o[0],u=o[1];return n.createElement("div",{className:"EditableField"},l?n.createElement(I.default,{autoFocus:!0,inputProps:{maxLength:20,style:{fontSize:e.fontSize?e.fontSize:50}},value:r,onChange:function(e){return i(e.target.value)},onBlur:function(t){return u(!1),void e.getScriptName([e.id,r])}}):n.createElement("div",{onClick:function(){u(!0)}},r))};var x=a(2982);const P=function(e){var t=[{name:"Kiyo",id:1},{name:"Cast Member",id:2}],a=n.useState(e.cast&&e.cast.length>0?e.cast:t),s=(0,b.default)(a,2),r=s[0],i=s[1],c=n.useState(e.cast&&e.cast.length>0?e.cast.length:t.length),o=(0,b.default)(c,2),l=o[0],u=o[1];function d(t){for(var a=t[0],n=t[1],s=0;s<r.length;s++)r[s].id==a&&(r[s].name=n);i((function(e){return(0,x.default)(e)})),e.getAllCast(r)}return n.createElement("div",{className:"CastMembers"},r.map((function(t,a){return n.createElement("div",{id:"CastMembers-castId-"+t.id,className:"CastMembers-cast",key:a,onClick:function(){return function(t){for(var a=document.querySelectorAll(".CastMembers-cast"),n=0;n<a.length;n++)a[n].classList.remove("active");document.getElementById("CastMembers-castId-"+t.id).classList.add("active"),!e.selectedCast||e.selectedCast(t)}(t)}},n.createElement(A,{name:t.name,id:t.id,fontSize:16,getScriptName:d}))})),n.createElement("div",{className:"CastMembers-addCast CastMembers-cast",onClick:function(){return function(){var t={name:"Cast Member",id:l+1};i((function(e){return[].concat((0,x.default)(e),[t])})),u(l+1),e.getAllCast(r)}()}},"+"))};const T=function(e){var t=[{name:"Bombay",id:1},{name:"Sheraton Hostel",id:2}],a=n.useState(e.scenes&&e.scenes.length>0?e.scenes:t),s=(0,b.default)(a,2),r=s[0],i=s[1],c=n.useState(e.scenes&&e.scenes.length>0?e.scenes.length:t.length),o=(0,b.default)(c,2),l=o[0],u=o[1];function d(t){for(var a=t[0],n=t[1],s=0;s<r.length;s++)r[s].id==a&&(r[s].name=n);i((function(e){return(0,x.default)(e)})),e.getAllScenes(r)}return n.createElement("div",{className:"Scenes"},r.map((function(t,a){return n.createElement("div",{id:"Scenes-sceneId-"+t.id,className:"Scenes-scene",key:a,onClick:function(){return function(t){for(var a=document.querySelectorAll(".Scenes-scene"),n=0;n<a.length;n++)a[n].classList.remove("active");document.getElementById("Scenes-sceneId-"+t.id).classList.add("active"),!e.selectedScene||e.selectedScene(t)}(t)}},n.createElement(A,{name:t.name,id:t.id,fontSize:16,getScriptName:d}))})),n.createElement("div",{className:"Scenes-addScene Scenes-scene",onClick:function(){return function(){var t={name:"Scene",id:l+1};i((function(e){return[].concat((0,x.default)(e),[t])})),u(l+1),e.getAllScenes(r)}()}},"+"))};const V=function(e){var t=(0,n.useRef)(null);return n.createElement("div",{className:"FilePicker"},n.createElement("span",null,e.msgType),n.createElement("input",{type:"file",ref:t,onChange:function(t){var a=t.target.files[0],n=M.storage().ref(e.msgType.replace(/ /g,"")+"/").child(a.name);n.put(a).then((function(){n.getDownloadURL().then((function(t){e.getImgURL(t)}))}))}}))};var O=a(377);a(7764);const L=function(e){var t=n.useState(!1),a=(0,b.default)(t,2),s=a[0],r=a[1],i=n.useState(null),c=(0,b.default)(i,2),o=c[0],l=c[1];return n.createElement("div",{className:"RecordModal"},s?n.createElement("div",{className:"RecordModal-modalPopup"},n.createElement(O.Recorder,{handleAudioStop:function(t){r(!1),l(t.blobURL);var a=Math.floor(Date.now()/1e3),n=M.storage().ref("VoiceNotes/"+a),s=new File([t.blob],a.toString()+"audio.mp3",{type:"audio/mp3",metadata:{cors:[{origin:["http://localhost:19006"]}]}});n.put(s).then((function(t){t.ref.getDownloadURL().then((function(t){e.getVNURL(t)}))}))}})):n.createElement("button",{onClick:function(){r(!0)},className:"RecordModal-recordBbutton"},"Start recording"),o&&n.createElement("div",null,n.createElement("audio",{src:o,controls:!0})))};const B=function(e){return n.createElement("div",{className:"MsgTypes"},n.createElement("div",{className:"MsgTypes-name",onClick:function(){return e.grabScreenshot()}},"Screen Shot"),n.createElement("div",{className:"MsgTypes-name"},n.createElement(V,{msgType:"Insert Image",getImgURL:e.getInsertedImg})),n.createElement("div",{className:"MsgTypes-name"},n.createElement(L,{msgType:"Voice Note",getVNURL:e.getVNURL})),n.createElement("div",{className:"MsgTypes-name"},n.createElement(V,{msgType:"Upload Video",getImgURL:e.getUplodedVideo})),["Is Typing","Left Chat"].map((function(t,a){return n.createElement("div",{id:"MsgTypes-id-"+a,className:"MsgTypes-name",key:a,onClick:function(){return e.selectedMsgType?e.selectedMsgType(t):{}}},t)})))};var H=a(9826);const j=function(e){var t=n.useState("0:00"),a=(0,b.default)(t,2),s=a[0],r=a[1],i=function(e){var t=e.split(":"),a=(0,b.default)(t,3),n=a[0],s=a[1],r=a[2],i=Number(n),c=Number(s),o=Number(r);return!isNaN(i)&&isNaN(c)&&isNaN(o)?i:isNaN(i)||isNaN(c)||!isNaN(o)?isNaN(i)||isNaN(c)||isNaN(o)?0:60*i*60+60*c+o:60*i+c},c=function(e){var t=parseInt(e.toString(),10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":").replace(/^0/,"")};return e.spslm&&r(e.spslm),n.createElement("input",{className:"TimeInput",type:"text",onChange:function(e){r(e.target.value)},onBlur:function(t){var a=t.target.value,n=Math.max(0,i(a));e.inputTime(n);var s=c(n);r(s)},value:s})};const _=function(e){var t=(0,n.useState)(!1),a=(0,b.default)(t,2),s=a[0],r=a[1],i=(0,n.useState)(e.alreadySavedValue),c=(0,b.default)(i,2),o=c[0],l=c[1];return n.createElement("div",{className:"parent-element"},s&&n.createElement("div",{id:"popup"},n.createElement("div",{id:"popup-content"},n.createElement(I.default,{variant:"outlined",value:o,placeholder:"Type comment here",onChange:function(e){l(e.target.value)},multiline:!0,minRows:4}),n.createElement("button",{id:"save",onClick:function(){e.onSave(o,e.idOfMsgCommented,e.whoSentCommentedMsg),r(!1)}},"Save"),n.createElement("button",{id:"close",onClick:function(){r(!1)}},"\xd7"))),n.createElement("button",{id:"commented-button",onClick:function(){r(!0)}},"comment"))};var D=a(900),F=a.n(D);function U(e,t){var a="undefined"!==typeof Symbol&&e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Z(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var W=function(e){(0,c.default)(a,e);var t=z(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).getScriptName=function(e){n.state.script.updateScriptName(e[1])},n.getAllCast=function(e){n.state.script.updateCast(e)},n.getAllScenes=function(e){n.state.script.updateScene(e)},n.getSelectedCast=function(e){n.setState({selectedCastId:e.id},(function(){n.setState({allMessages:n.state.script.getOnlyTextMsgsAsNodes()})}))},n.getSelectedScene=function(e){n.setState({selectedSceneId:e.id},(function(){n.setState({allMessages:n.state.script.getOnlyTextMsgsAsNodes()})}))},n.getSelectedMsgType=function(e){n.setState({textMsg:e},(function(){n.addNewMessage()}))},n.alreadyBeenLikedByselectedCastId=function(e){var t=""+e+n.state.selectedCastId;return!!n.state.likedByMap.has(t)&&n.state.likedByMap.get(t)},n.addNewLikeMsg=function(e,t){if(n.alreadyBeenLikedByselectedCastId(e))n.deleteLikedMessage(e,n.state.selectedCastId);else{var a=Math.floor(Date.now()/1e3),s=n.state.timeSinceLastMsg;""!=s&&0!=s||(s=n.state.spslm);var r={id:a,timeStamp:a,msgType:"like",whoSentLikedMsg:t,idOfMsgLiked:e,whoLikedMsg:n.state.selectedCastId,tslmsg:s,sceneId:n.state.selectedSceneId};n.state.script.addNewMessage(r);var i=new Map(n.state.likedByMap);i.set(""+e+n.state.selectedCastId,!0),n.setState({likedByMap:i,allMessages:n.state.script.getOnlyTextMsgsAsNodes(),spslm:0})}},n.addNewMessage=function(){var e=Math.floor(Date.now()/1e3),t=n.state.timeSinceLastMsg;""!=t&&0!=t||(t=n.state.spslm);var a={id:e,timeStamp:e,content:n.state.textMsg,emotion:n.state.emotion,senderId:n.state.selectedCastId,tslmsg:t,msgType:"textMsg",sceneId:n.state.selectedSceneId};n.state.script.addNewMessage(a),n.setState({allMessages:n.state.script.getOnlyTextMsgsAsNodes(),textMsg:"",emotion:"",spslm:0})},n.addNewMsgComment=function(e,t,a){var s=Math.floor(Date.now()/1e3),r=n.state.timeSinceLastMsg;""!=r&&0!=r||(r=n.state.spslm);var i={id:s,timeStamp:s,msgType:"comment",content:e,emotion:n.state.emotion,whoSentCommentedMsg:a,idOfMsgCommented:t,whoCommentedMsg:n.state.selectedCastId,tslmsg:r,sceneId:n.state.selectedSceneId};n.state.script.addNewMessage(i),n.setState({allMessages:n.state.script.getOnlyTextMsgsAsNodes(),textMsg:"",emotion:"",spslm:0})},n.addNewMediaMsg=function(e,t,a,s,r){var i=Math.floor(Date.now()/1e3),c=n.state.timeSinceLastMsg;""!=c&&0!=c||(c=n.state.spslm);var o={id:i,timeStamp:i,content:e,emotion:n.state.emotion,senderId:n.state.selectedCastId,tslmsg:c,isImg:a,isAudio:s,isVideo:r,msgType:"textMsg",url:t,sceneId:n.state.selectedSceneId};n.state.script.addNewMessage(o),n.setState({allMessages:n.state.script.getOnlyTextMsgsAsNodes(),textMsg:"",emotion:"",spslm:0})},n.getInputTime=function(e){n.setState({timeSinceLastMsg:e})},n.deleteMessage=function(e){n.state.script.deleteMessage(e),n.setState({allMessages:n.state.script.getOnlyTextMsgsAsNodes()},(function(){n.state.script.updateScriptFirebase()}))},n.onSaveComment=function(e,t,a){var s=n.state.script.getCommentNodeByCastIdMsgId(n.state.selectedCastId,t);s!=nil?n.state.script.editNodeContent(s.id,e):n.addNewMsgComment(e,t,a)},n.grabScreenshot=function(e){var t=document.getElementById("EditScript-chatArea-id");F()(t).then((function(e){var t=e.toDataURL(),a=Math.floor(Date.now()/1e3);M.storage().ref("ScreenShot/"+a).putString(t,"data_url").then((function(e){e.ref.getDownloadURL().then((function(e){console.log("Image URL: "+e),n.addNewMediaMsg("ScreenShot",e,!0,!1,!1)}))}))}))},n.getInsertedImg=function(e){console.log("url",e),n.addNewMediaMsg("InsertImage",e,!0,!1,!1)},n.getUplodedVideo=function(e){console.log("url",e),n.addNewMediaMsg("UploadedVideo",e,!1,!1,!0)},n.getVNURL=function(e){console.log("url",e),n.addNewMediaMsg("VoiceNote",e,!1,!0,!1)},n.state={animateGreeting:"EditScript-animategreeting",orderId:"",script:e.script?e.script:null,isNewScript:e.isNewScript,selectedCastId:1,selectedSceneId:1,selectedMsgType:"",timeSinceLastMsg:"",textMsg:"",emotion:"",allMessages:[],spslm:0,likedByMap:e.script?e.script.getOnlyLikedMsgsAsNodes():new Map},n}return(0,i.default)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"componentDidMount",value:function(){var e=this;if(window.location.href.includes("?/")){var t=window.location.href.split("?/")[1];this.props.history.push({pathname:"/"+t})}if(this.state.isNewScript)this.setState({likedByMap:this.generateLikedMap(this.state.script.getOnlyLikedMsgsAsNodes())});else{var a=window.location.pathname.replaceAll("/editscript/","");if(""!=a){var n=new R(a);n.grabScriptFromFirebase(a).then((function(){e.setState({script:n,likedByMap:e.generateLikedMap(n.getOnlyLikedMsgsAsNodes())})}))}}this.intervalId=setInterval((function(){e.setState({spslm:e.state.spslm+1})}),1e3)}},{key:"generateLikedMap",value:function(e){for(var t,a=new Map,n=U(e);!(t=n()).done;){var s=t.value,r=""+s.msgLikedId+s.msgLikedSenderId;a.set(r,!0)}return a}},{key:"deleteLikedMessage",value:function(e,t){this.setState({likedByMap:this.state.likedByMap.set(""+e+t,!1)});var a=this.state.script.getOnlyLikedMsgsAsNodes().find((function(a){return a.idOfMsgLiked===e&&a.whoLikedMsg===t}));a.id&&this.deleteMessage(a.id)}},{key:"componentDidUpdate",value:function(){this.state.script&&this.state.script.updateScriptFirebase()}},{key:"render",value:function(){var e=this;return this.state.script?n.createElement("div",{className:"EditScript"},n.createElement("div",{className:"EditScript-container l-container"},n.createElement("div",{className:"EditScript-title"},n.createElement(A,{name:this.state.script.getScriptName(),getScriptName:this.getScriptName})),n.createElement("div",{className:"EditScript-scenes"},n.createElement(T,{scenes:this.state.script.getAllScenes(),selectedScene:this.getSelectedScene,getAllScenes:this.getAllScenes})),n.createElement("div",{className:"EditScript-cast"},n.createElement(P,{cast:this.state.script.getAllCast(),selectedCast:this.getSelectedCast,getAllCast:this.getAllCast})),n.createElement("div",{className:"EditScript-textView"},n.createElement(B,{grabScreenshot:this.grabScreenshot,getInsertedImg:this.getInsertedImg,selectedMsgType:this.getSelectedMsgType,getUplodedVideo:this.getUplodedVideo,getVNURL:this.getVNURL}),n.createElement("div",{id:"EditScript-chatArea-id",className:"EditScript-chatArea"},0==this.state.allMessages.length&&n.createElement("span",{className:"EditScript-castMemberPrompt"},"click on a cast member to see messages"),this.state.allMessages.map((function(t,a){return t.sceneId==e.state.selectedSceneId&&n.createElement(X,{key:a,isActive:t.senderId==e.state.selectedCastId,value:t,index:a},t.isImg&&n.createElement("img",{className:"EditScript-imgMsg",src:t.url}),t.isAudio&&n.createElement("audio",{className:"EditScript-audioMsg",src:t.url,controls:!0}),t.isVideo&&n.createElement("video",{className:"EditScript-videoMsg",src:t.url,controls:!0}),n.createElement("div",null,n.createElement("span",{className:"EditScript-msgIndex"},t.MsgIndex),n.createElement("span",{className:"EditScript-senderName"},e.state.script.getSenderNameFromID(t.senderId)),n.createElement("span",{className:"EditScript-senderEmotion"},t.emotion?"("+t.emotion+")":""),n.createElement("span",null,t.content)),n.createElement("div",{className:"EditScript-chatArea-msg-buttons"},n.createElement("button",{className:"EditScript-chatArea-msg-button",onClick:function(){return e.deleteMessage(t.id)}},"Delete"),n.createElement("button",{className:"EditScript-chatArea-msg-button",onClick:function(){return e.addNewLikeMsg(t.id,t.senderId)}},e.alreadyBeenLikedByselectedCastId(t.id)?"Unlike":"Like"),n.createElement(_,{className:"EditScript-chatArea-msg-button",idOfMsgCommented:t.id,whoSentCommentedMsg:t.senderId,onSave:e.onSaveComment,alreadySavedValue:e.state.script.getCommentByCastIdMsgId(e.state.selectedCastId,t.id)})))}))),n.createElement("div",{className:"EditScript-sendMessage"},n.createElement(I.default,{variant:"outlined",className:"EditScript-sendMessage--input",value:this.state.textMsg,placeholder:"Type message here",onChange:function(t){e.setState({textMsg:t.target.value})}}),n.createElement(I.default,{variant:"outlined",className:"EditScript-emotions--input",value:this.state.emotion,placeholder:"Type emotion here",onChange:function(t){e.setState({emotion:t.target.value})}}),n.createElement(j,{inputTime:this.getInputTime})),n.createElement("div",{className:"EditScript-saveSubmit"},n.createElement("div",null,n.createElement(H.default,{className:"EditScript-saveSubmit--send",variant:"outlined",color:"primary",onClick:function(){return e.addNewMessage()}},"Send")),n.createElement("div",null,n.createElement(H.default,{className:"EditScript-saveSubmit--save",variant:"outlined",color:"primary",onClick:function(){return e.state.script.updateScriptFirebase()}},"save")))))):n.createElement("div",{className:"is-loading"},"script loading...")}}]),a}(n.Component),q=(0,d.withRouter)((0,N.connect)((function(e){return{}}))(W));const K=(0,d.withRouter)(q);var X=function(e){return e.isActive?n.createElement("div",{className:"EditScript-chatArea-msg active"},e.children):n.createElement("div",{className:"EditScript-chatArea-msg"},e.children)};function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var G=new R("NewScript"),J=function(e){(0,c.default)(a,e);var t=Y(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={script:G},n}return(0,i.default)(a,[{key:"render",value:function(){return n.createElement("div",{className:"NewScript"},n.createElement(K,{isNewScript:!0,script:this.state.script}))}}]),a}(n.Component),Q=(0,d.withRouter)((0,N.connect)((function(e){return{}}))(J));const $=(0,d.withRouter)(Q);var ee=a(1392);function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var ae=function(e){(0,c.default)(a,e);var t=te(a);function a(e){var s;return(0,r.default)(this,a),(s=t.call(this,e)).handlePreviousClick=function(){s.state.script&&(clearTimeout(s.state.timeoutId),s.setState((function(e){if(0===e.currentNodeIndex)return{};var t=e.currentNodeIndex-1,a=s.state.script.getNthMessageNode(t).sceneId;void 0===a&&(a=s.state.script.getTotalNumScenes());e.allMessages.slice();return{currentNodeIndex:t,allMessages:1===e.allMessages.length?e.allMessages:s.state.script.getAllMessagesAsNodes().slice(0,t),selectedSceneId:a}})))},s.handlePlayPauseClick=function(){clearTimeout(s.state.timeoutId),s.setState((function(e){return{isPlaying:!e.isPlaying}}))},s.handleNextClick=function(){clearTimeout(s.state.timeoutId),s.updateCurrentNode(s.state.currentNodeIndex+1),s.startAutoPlay()},s.getScriptName=function(e){return e[1]},s.selectThisScene=function(e){s.setState({selectedSceneId:e,allMessages:s.state.script.getAllMessagesAsNodes()})},s.reactionClicked=function(e,t,a){a.currentTarget.classList.add("shake"),s.state.script.updateReaderReaction(e,t)},s.getReaderReactionFromMsg=function(){var e=[];return s.state.allMessages.forEach((function(t){s.state.script.getReaderReactionMap().has(t.id.toString())&&e.push.apply(e,(0,x.default)(s.state.script.getReaderReactionMap().get(t.id.toString())))})),e.map((function(e,t){return n.createElement(ee.Emoji,{emoji:e,set:"twitter",size:14,key:t,className:"ReaderView-reactionEmoji"})}))},s.state={script:null,allMessages:[],currentNodeIndex:0,selectedSceneId:1,timeoutId:null,isPlaying:!0},s.emojis=[{name:"exploding_head",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"relaxed",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"astonished",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"pensive",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"angry",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"scream",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"kissing_heart",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"rolling_on_the_floor_laughing",set:"twitter",size:14,className:"ReaderView-reactionEmoji"}],s}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;""==t&&(t="NewScript1674709550");var a=new R(t);a.grabScriptFromFirebase(t).then((function(){e.setState({script:a},(function(){e.updateCurrentNode(),e.startAutoPlay()}))}))}},{key:"updateCurrentNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.state.script&&this.state.script.getNthMessageNode(e)){var t=this.state.script.getNthMessageNode(e).sceneId;void 0===t&&(t=this.state.script.getTotalNumScenes()),this.setState({currentNodeIndex:e,allMessages:this.state.script.getAllMessagesAsNodes().slice(0,e),selectedSceneId:t})}}},{key:"startAutoPlay",value:function(){var e=this;this.state.isPlaying&&this.state.currentNodeIndex<this.state.script.getAllMessagesAsNodes().length&&this.setState({timeoutId:setTimeout((function(){e.handleNextClick()}),20*this.state.script.getNthMessageNode(this.state.currentNodeIndex).tslmsg)})}},{key:"render",value:function(){var e=this;return this.state.allMessages&&this.state.allMessages.length>0?n.createElement("div",{className:"ReaderView"},n.createElement("div",{className:"ReaderView-container l-container"},n.createElement("div",{className:"ReaderView-title"},this.state.script.getScriptName()),n.createElement("div",{className:"ReaderView-scenes"},this.state.script.getScenes().map((function(t,a){return t.id==e.state.selectedSceneId?n.createElement("div",{key:a,onClick:function(){return e.selectThisScene(t.id)},className:"ReaderView-scene ReaderView-scene--currentScene"},t.name):n.createElement("div",{key:a,onClick:function(){return e.selectThisScene(t.id)},className:"ReaderView-scene"},t.name)}))),n.createElement("div",{className:"ReaderView-textView"},n.createElement("div",{id:"ReaderView-chatArea-id",className:"ReaderView-chatArea"},this.state.allMessages.map((function(t,a){return t.sceneId==e.state.selectedSceneId&&n.createElement("div",{key:a,className:"ReaderView-chatArea-msg"},t.isImg&&n.createElement("img",{className:"ReaderView-imgMsg",src:t.url}),t.isAudio&&n.createElement("audio",{className:"ReaderView-audioMsg",src:t.url,controls:!0}),t.isVideo&&n.createElement("video",{className:"ReaderView-videoMsg",src:t.url,controls:!0}),"like"==t.msgType&&n.createElement("div",{className:"ReaderView-msgLike"},n.createElement("span",null,e.state.script.getSenderNameFromID(t.whoLikedMsg),"\xa0 liked message\xa0",e.state.script.getNodeByMessageId(t.idOfMsgLiked).data.MsgIndex,"\xa0 by\xa0",e.state.script.getSenderNameFromID(t.whoSentLikedMsg),"\xa0")),n.createElement("div",null,n.createElement("span",{className:"ReaderView-msgIndex"},t.MsgIndex),n.createElement("span",{className:"ReaderView-senderName"},e.state.script.getSenderNameFromID(t.senderId)),n.createElement("span",{className:"ReaderView-senderEmotion"},t.emotion?"("+t.emotion+")":""),n.createElement("span",null,t.content),n.createElement("div",{className:"ReaderView-reactionEmojis"},e.emojis.map((function(a,s){return n.createElement("div",{key:s,className:"ReaderView-reactionEmoji",onClick:function(n){return e.reactionClicked(a.name,t.id,n)}},n.createElement(ee.Emoji,{emoji:a.name,set:a.set,size:a.size,key:a.name,className:"ReaderView-reactionEmoji"}))})))))})))),n.createElement("div",{className:"ReaderView-readerReaction--wrapper"},n.createElement("span",null,"audience:"),n.createElement("div",{className:"ReaderView-readerReaction"}," ",this.getReaderReactionFromMsg())),n.createElement("div",{className:"ReaderView-navigation"},n.createElement("div",{className:"ReaderView-navigation--wrapper"},n.createElement("div",{className:"previous-button",onClick:this.handlePreviousClick},n.createElement("i",{className:"fas fa-arrow-left"})),n.createElement("div",{className:"play-pause-button",onClick:this.handlePlayPauseClick},this.state.isPlaying?n.createElement("i",{className:"fas fa-pause"}):n.createElement("i",{className:"fas fa-play"})),n.createElement("div",{className:"next-button",onClick:this.handleNextClick},n.createElement("i",{className:"fas fa-arrow-right"})))))):n.createElement("div",{className:"ReaderView is-loading"},"rytriving script")}}]),a}(n.Component),ne=(0,d.withRouter)((0,N.connect)((function(e){return{}}))(ae));const se=(0,d.withRouter)(ne);function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var ie=function(e){(0,c.default)(a,e);var t=re(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).typeWriter=function(){var e=n.state,t=e.leftText,a=e.rightText,s=e.leftCounter,r=e.rightCounter,i="ryting",c="ryeading?";s<i.length&&n.setState({leftText:t+i.charAt(s),leftCounter:s+1}),r<c.length&&n.setState({rightText:a+c.charAt(r),rightCounter:r+1}),setTimeout(n.typeWriter,150)},n.state={leftText:"",rightText:"",leftCounter:0,rightCounter:0},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.typeWriter()}},{key:"render",value:function(){var e=this,t=this.state,a=t.leftText,s=t.rightText;return n.createElement("div",{className:"HomePage"},n.createElement("div",{className:"HomePage__left-side"},n.createElement("div",{className:"HomePage__left-side-a",onClick:function(){return e.props.changePage("newscript")}},n.createElement("h1",{className:"HomePage__text HomePage__text--glossy"},a))),n.createElement("div",{className:"HomePage__demarcation"},n.createElement("div",{className:"HomePage-or"},"or")),n.createElement("div",{className:"HomePage__right-side"},n.createElement("div",{className:"HomePage__right-side-a",onClick:function(){return e.props.changePage("searchscripts")}},n.createElement("h1",{className:"HomePage__text HomePage__text--glossy"},s))))}}]),a}(n.Component),ce=(0,d.withRouter)((0,N.connect)((function(e){return{}}))(ie));const oe=(0,d.withRouter)(ce);var le=a(7326);function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var de=function(e){(0,c.default)(a,e);var t=ue(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={searchBarUp:!1,results:[],searchTerm:"",scripts:[]},n.handleFocus=n.handleFocus.bind((0,le.default)(n)),n.handleBlur=n.handleBlur.bind((0,le.default)(n)),n.handleSearch=n.handleSearch.bind((0,le.default)(n)),n.selectResult=n.selectResult.bind((0,le.default)(n)),n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this;M.getScripts().then((function(t){e.setState({scripts:t,results:t})}))}},{key:"handleSearch",value:function(e){if(this.setState({searchTerm:e.target.value}),this.state.scripts){var t=this.state.scripts.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));this.setState({results:t})}else console.log("data is not defined");""==e.target.value&&this.setState({results:this.state.scripts})}},{key:"handleFocus",value:function(){this.setState({searchBarUp:!0})}},{key:"handleBlur",value:function(){this.state.results.length||this.setState({searchBarUp:!1})}},{key:"selectResult",value:function(e,t){if(t){var a=prompt("Please enter master password to read private","");null!=a&&"7779"==a&&this.props.history.push({pathname:"/readerview/"+e})}else this.props.history.push({pathname:"/readerview/"+e})}},{key:"render",value:function(){var e=this;return n.createElement("div",{className:"search-scripts"},n.createElement("div",{className:"search-bar",style:{top:this.state.searchBarUp?"-25%":"-15%"}},n.createElement("input",{type:"text",placeholder:"what are you ryeading?",onChange:this.handleSearch,onFocus:this.handleFocus,onBlur:this.handleBlur})),n.createElement("div",{className:"search-results"},this.state.results.map((function(t){return n.createElement("div",{className:"search-eachResult",key:t.id,onClick:function(){return e.selectResult(t.id,t.isPrivateScript)}},n.createElement("h3",null,t.name),n.createElement("p",null,t.id))}))))}}]),a}(n.Component),me=(0,d.withRouter)((0,N.connect)((function(e){return{}}))(de));const fe=(0,d.withRouter)(me);function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var pe=function(e){(0,c.default)(a,e);var t=he(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).changePage=function(e){window.history.pushState("","New Page Title","/"+e),n.setState({pageName:e})},n.state={pageName:n.props.pageName},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){if(window.location.href.includes("?/")){var e=window.location.href.split("?/")[1];this.props.history.push({pathname:"/"+e})}document.getElementById("layoutContent").classList.add(this.state.pageName)}},{key:"componentDidUpdate",value:function(){var e=document.getElementById("layoutContent");e.className="",e.classList.add("Layout-content"),e.classList.add(this.state.pageName)}},{key:"render",value:function(){return n.createElement("div",{className:"Layout"},n.createElement("div",{className:"Layout-header"},n.createElement(y,{changePage:this.changePage})),n.createElement("div",{className:"Layout-content",id:"layoutContent"},"textyng"==this.state.pageName&&n.createElement(oe,{changePage:this.changePage}),"newscript"==this.state.pageName&&n.createElement($,{changePage:this.changePage}),"readerview"==this.state.pageName&&n.createElement(se,{changePage:this.changePage}),"editscript"==this.state.pageName&&n.createElement(K,{changePage:this.changePage}),"searchscripts"==this.state.pageName&&n.createElement(fe,{changePage:this.changePage})),n.createElement("div",{className:"Layout-footer"},n.createElement(h,null)))}}]),a}(n.Component);const ge=pe;function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.default)(this,a)}}var ye=u.HashRouter;console.log("environment is ","production"),window.onresize=function(){document.getElementsByClassName("App").height=window.innerHeight},window.onresize();var Ne=function(e){(0,c.default)(a,e);var t=ve(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){return n.createElement(ye,null,n.createElement("div",{className:"App"},n.createElement("div",{className:"App-content"},n.createElement(d.Switch,null,n.createElement(d.Route,{path:"/",exact:!0,component:function(){return n.createElement(ge,{pageName:"textyng"})}}),n.createElement(d.Route,{path:"/textyng",exact:!0,component:function(){return n.createElement(ge,{pageName:"textyng"})}}),n.createElement(d.Route,{path:"/newscript",exact:!0,component:function(){return n.createElement(ge,{pageName:"newscript"})}}),n.createElement(d.Route,{path:"/readerview/:id",exact:!0,component:function(){return n.createElement(ge,{pageName:"readerview"})}}),n.createElement(d.Route,{path:"/editscript/:id",exact:!0,component:function(){return n.createElement(ge,{pageName:"editscript"})}}),n.createElement(d.Route,{path:"/searchscripts",exact:!0,component:function(){return n.createElement(ge,{pageName:"searchscripts"})}})))))}}]),a}(n.Component);const Se=Ne;var Ee=a(6639),Me=a(4942),we="SET_YOKIS_ITEMS";function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){(0,Me.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re={yokis:[]};const Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;return t.type===we?ke(ke({},e),{},{yokis:t.payload}):e};const be=(0,Ee.createStore)(Ie);const Ae={apiKey:"AIzaSyCtlY88fmnAbNOZIRemBADFMvicXjKOjFQ",authDomain:"textyng.firebaseapp.com",projectId:"textyng",storageBucket:"textyng.appspot.com",messagingSenderId:"892488022331",appId:"1:892488022331:web:25a6af11d37b5ef3939f1e",measurementId:"G-X3VZXJEPLP"};E().apps.length||E().initializeApp(Ae);var xe=n.createElement(N.Provider,{store:be},n.createElement(u.BrowserRouter,null,n.createElement(Se,null)));window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0,s.render(xe,document.getElementById("root"))}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,n,s,r)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,s,r]=e[u],c=!0,o=0;o<n.length;o++)(!1&r||i>=r)&&Object.keys(a.O).every((e=>a.O[e](n[o])))?n.splice(o--,1):(c=!1,r<i&&(i=r));if(c){e.splice(u--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,s,r]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var s,r,[i,c,o]=n,l=0;if(i.some((t=>0!==e[t]))){for(s in c)a.o(c,s)&&(a.m[s]=c[s]);if(o)var u=o(a)}for(t&&t(n);l<i.length;l++)r=i[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=a.O(void 0,[606],(()=>a(1050)));n=a.O(n)})();
//# sourceMappingURL=main.defbf406.js.map