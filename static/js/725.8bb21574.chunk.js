"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[725,458],{4458:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(2982),s=n(5671),r=n(3144),i=n(7326),o=n(136),c=n(2963),l=n(1120),u=n(4687),d=n.n(u),m=n(9526),f=n(2868),h=n.n(f),p=n(7586);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,l.default)(e);if(t){var s=(0,l.default)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,o.default)(c,e);var t=g(c);function c(e){var n;return(0,s.default)(this,c),(n=t.call(this,e)).state={userInput:"",conversationHistory:[],isTyping:!1},n.handleInputChange=n.handleInputChange.bind((0,i.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,i.default)(n)),n.scrollDown=n.scrollDown.bind((0,i.default)(n)),n}return(0,r.default)(c,[{key:"handleInputChange",value:function(e){this.setState({userInput:e.target.value})}},{key:"handleSubmit",value:function(e){var t,s,r,i,o,c,l,u,m,f,g,v,y,w,N;return d().async((function(S){for(;;)switch(S.prev=S.next){case 0:if(e.preventDefault(),t=this.state.userInput.trim()){S.next=4;break}return S.abrupt("return");case 4:s=[].concat((0,a.default)(this.state.conversationHistory),[{speaker:"user",text:t}]),this.setState({conversationHistory:s,userInput:"",isTyping:!0}),r="",S.prev=7,S.next=27;break;case 11:return i=S.sent,o=Array.isArray(i)?i.join(""):i,S.next=15,d().awrap(p.default.getConversationHistory());case 15:return c=S.sent,l=c.join(""),u=n(4653),m=u.Configuration,f=u.OpenAIApi,delete(g=new m({apiKey:o})).baseOptions.headers["User-Agent"],v=new f(g),S.next=23,d().awrap(v.createCompletion({model:"text-davinci-003",prompt:l+"\nUser: "+t+"\nAI:",max_tokens:150,n:1,stop:["\nUser:","AI:"]}));case 23:y=S.sent,r=y.data.choices[0].text.trim(),S.next=31;break;case 27:return S.next=29,d().awrap(h().post("http://localhost:5000/ask",{inputText:t}));case 29:w=S.sent,r=w.data;case 31:N=[].concat((0,a.default)(this.state.conversationHistory),[{speaker:"ai",text:r}]),this.setState({conversationHistory:N,isTyping:!1},this.scrollDown),S.next=38;break;case 35:S.prev=35,S.t0=S.catch(7),console.log(S.t0);case 38:case"end":return S.stop()}}),null,this,[[7,35]],Promise)}},{key:"scrollDown",value:function(){var e=document.querySelector(".Conversation-history");e.scrollTop=e.scrollHeight}},{key:"oncloseCoonversationClick",value:function(){this.props.oncloseCoonversationClick()}},{key:"render",value:function(){var e=this.state,t=e.conversationHistory,n=e.userInput,a=e.isTyping;return m.createElement("div",{className:"Conversation-container l-container"},m.createElement("div",{className:"Conversation-history"},t.map((function(e,t){return m.createElement("div",{key:t,className:"Conversation-message"},m.createElement("div",{className:"message-text"},e.text))})),a&&m.createElement("div",{className:"Conversation-message ai Conversation-loader"},m.createElement("div",{className:"message-text"},m.createElement("div",{className:"typing-indicator"},m.createElement("span",null),m.createElement("span",null),m.createElement("span",null))))),m.createElement("form",{className:"Conversation-input",onSubmit:this.handleSubmit},m.createElement("input",{type:"text",value:n,onChange:this.handleInputChange}),m.createElement("button",{type:"submit"},"Send")))}}]),c}(m.Component);const y=v},725:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(2982),s=n(5671),r=n(3144),i=n(136),o=n(2963),c=n(1120),l=n(9526),u=n(2246),d=n(9934),m=n(536),f=n(1392),h=n(4458);function p(e,t){var n="undefined"!==typeof Symbol&&e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var s=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return(0,o.default)(this,n)}}var y=function(e){(0,i.default)(n,e);var t=v(n);function n(e){var r;return(0,s.default)(this,n),(r=t.call(this,e)).handlePreviousClick=function(){r.state.script&&(clearTimeout(r.state.timeoutId),r.setState((function(e){if(0===e.currentNodeIndex)return{};var t=e.currentNodeIndex-1,n=r.state.script.getNthMessageNode(t).sceneId;void 0===n&&(n=r.state.script.getTotalNumScenes());e.allMessages.slice();return{currentNodeIndex:t,allMessages:1===e.allMessages.length?e.allMessages:r.state.script.getAllMessagesAsNodes().slice(0,t),selectedSceneId:n}})))},r.handleSpanClick=function(){r.setState({showConversation:!0})},r.handlePlayPauseClick=function(){clearTimeout(r.state.timeoutId),r.setState((function(e){return{isPlaying:!e.isPlaying}}))},r.handleNextClick=function(){clearTimeout(r.state.timeoutId),r.updateCurrentNode(r.state.currentNodeIndex+1)},r.getScriptName=function(e){return e[1]},r.selectThisScene=function(e){r.setState({selectedSceneId:e,allMessages:r.state.script.getAllMessagesAsNodes()})},r.reactionClicked=function(e,t,n){n.currentTarget.classList.add("shake"),r.state.script.updateReaderReaction(e,t)},r.getReaderReactionFromMsg=function(){var e=[];return r.state.allMessages.forEach((function(t){r.state.script.getReaderReactionMap().has(t.id.toString())&&e.push.apply(e,(0,a.default)(r.state.script.getReaderReactionMap().get(t.id.toString())))})),e.map((function(e,t){return l.createElement(f.Emoji,{emoji:e,set:"twitter",size:14,key:t,className:"ReaderView-reactionEmoji"})}))},r.closeConversation=function(){r.setState({showConversation:!1})},r.state={script:null,allMessages:[],currentNodeIndex:0,selectedSceneId:1,timeoutId:null,isPlaying:!0,showConversation:!1},r.emojis=[{name:"rolling_on_the_floor_laughing",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"relaxed",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"angry",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"astonished",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"kissing_heart",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"exploding_head",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"pensive",set:"twitter",size:14,className:"ReaderView-reactionEmoji"},{name:"scream",set:"twitter",size:14,className:"ReaderView-reactionEmoji"}],r}return(0,r.default)(n,[{key:"componentDidUpdate",value:function(){if(document.querySelector(".ReaderView-chatArea")){var e=document.querySelector(".ReaderView-chatArea"),t=e.scrollTop,n=e.scrollHeight,a=(n-t)/10,s=0;setTimeout((function t(){e.scrollTop+=a,++s<10&&setTimeout(t,100)}),100)}var r=document.querySelector(".ReaderView-scene--currentScene"),i=document.querySelector(".ReaderView-scenes");if(r&&(i.scrollLeft=r.offsetLeft-i.offsetLeft-(i.offsetWidth-r.offsetWidth)/2),document.querySelector(".ReaderView-readerReaction")){var o=document.querySelector(".ReaderView-readerReaction");o.scrollLeft=o.scrollWidth}for(var c,l=p(document.querySelectorAll(".ReaderView-chatArea-msg"));!(c=l()).done;){var u=c.value;"true"===u.getAttribute("data-attribute-ispotagonist")&&u.classList.add("isProtagonist")}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;""==t&&(t="NewScript1674709550");var n=new m.default(t);n.grabScriptFromFirebase(t).then((function(){e.setState({script:n},(function(){e.updateCurrentNode(),e.handleNextClick()}))}))}},{key:"updateCurrentNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentNodeIndex+1;if(this.state.script&&this.state.script.getNthMessageNode(e)){var t=this.state.script.getNthMessageNode(e).sceneId;void 0===t&&(t=this.state.script.getTotalNumScenes()),this.setState({currentNodeIndex:e,allMessages:this.state.script.getAllMessagesAsNodes().slice(0,e),selectedSceneId:t})}}},{key:"startAutoPlay",value:function(){var e=this;this.state.isPlaying&&this.state.currentNodeIndex<this.state.script.getAllMessagesAsNodes().length&&this.setState({timeoutId:setTimeout((function(){e.handleNextClick()}),20*this.state.script.getNthMessageNode(this.state.currentNodeIndex).tslmsg)})}},{key:"render",value:function(){var e=this,t=this.state,n=t.script,a=t.selectedMessageIndex,s=function(e){return n.getSenderNameFromID(e.senderId)};return this.state.allMessages&&this.state.allMessages.length>0?l.createElement("div",{className:"ReaderView"},l.createElement("div",{className:"ReaderView-container l-container"},l.createElement("div",{className:"ReaderView-title"},this.state.script.getScriptName()),l.createElement("div",{className:"ReaderView-scenes"},this.state.script.getScenes().map((function(t,n){return t.id==e.state.selectedSceneId?l.createElement("div",{key:n,onClick:function(){return e.selectThisScene(t.id)},className:"ReaderView-scene ReaderView-scene--currentScene"},t.name):l.createElement("div",{key:n,onClick:function(){return e.selectThisScene(t.id)},className:"ReaderView-scene"},t.name)}))),l.createElement("div",{className:"ReaderView-msgCounts"},this.state.allMessages.length," / ",this.state.script.getAllMessagesAsNodes().length),l.createElement("div",{className:"ReaderView-textView"},l.createElement("div",{id:"ReaderView-chatArea-id",className:"ReaderView-chatArea"},this.state.allMessages.map((function(t,r){return t.sceneId==e.state.selectedSceneId&&l.createElement("div",{key:r,className:"ReaderView-chatArea-msg","data-attribute-ispotagonist":1===t.senderId},t.isImg&&l.createElement("img",{className:"ReaderView-imgMsg",src:t.url}),t.isAudio&&l.createElement("audio",{className:"ReaderView-audioMsg",src:t.url,controls:!0}),t.isVideo&&l.createElement("video",{className:"ReaderView-videoMsg",src:t.url,controls:!0}),"like"==t.msgType&&e.state.script.getNodeByMessageId(t.idOfMsgLiked)&&l.createElement("div",{className:"ReaderView-msgLike"},l.createElement("span",null,e.state.script.getSenderNameFromID(t.whoLikedMsg),"\xa0 liked message\xa0",e.state.script.getNodeByMessageId(t.idOfMsgLiked).data.MsgIndex,"\xa0 by\xa0",e.state.script.getSenderNameFromID(t.whoSentLikedMsg),"\xa0")),"action"==t.msgType&&l.createElement("div",{className:"ReaderView-msgTypeAction glowing-text"},l.createElement("span",{className:"ReaderView-senderName"},e.state.script.getSenderNameFromID(t.senderId)),l.createElement("span",null,"y: ",t.content)),"authorAction"==t.msgType&&l.createElement("div",{className:"ReaderView-msgTypeAuthorAction glowing-text"},l.createElement("div",{className:"ReaderView-content"},"yy: ",t.content)),"action"!=t.msgType&&"authorAction"!=t.msgType&&l.createElement("div",{className:"ReaderView-isnotactionMsg"},e.state.showConversation?l.createElement("div",{className:"ReaderView-conversation-container"},l.createElement("div",{className:"ReaderView-conversation-close",onClick:e.closeConversation},"X"),l.createElement(h.default,{className:"ReaderView-conversation",messages:n.messages,selectedMessageIndex:a,oncloseCoonversationClick:e.closeConversation,senderName:s})):l.createElement("span",{className:"ReaderView-senderName checking something!",onClick:e.handleSpanClick},e.state.script.getSenderNameFromID(t.senderId)),l.createElement("span",{className:"ReaderView-senderEmotion"},t.emotion?"("+t.emotion+")":""),l.createElement("span",null,t.content)),l.createElement("span",{className:"ReaderView-msgIndex"},t.MsgIndex),l.createElement("div",{className:"ReaderView-reactionEmojis-container"},l.createElement("div",{className:"ReaderView-reactionEmojis"},e.emojis.map((function(n,a){return l.createElement("div",{key:a,className:"ReaderView-reactionEmoji",onClick:function(a){return e.reactionClicked(n.name,t.id,a)}},l.createElement(f.Emoji,{emoji:n.name,set:n.set,size:n.size,key:n.name,className:"ReaderView-reactionEmoji"}))})))))})))),l.createElement("div",{className:"ReaderView-readerReaction--wrapper"},l.createElement("div",{className:"ReaderView-readerReaction"}," ",this.getReaderReactionFromMsg())),l.createElement("div",{className:"ReaderView-navigation"},l.createElement("div",{className:"ReaderView-navigation--wrapper"},l.createElement("div",{className:"previous-button",onClick:this.handlePreviousClick},l.createElement("i",{className:"fas fa-arrow-left"})),l.createElement("div",{className:"next-button",onClick:this.handleNextClick},l.createElement("i",{className:"fas fa-arrow-right"})))))):l.createElement("div",{className:"ReaderView is-loading"},"rytriving script")}}]),n}(l.Component),w=(0,d.withRouter)((0,u.connect)((function(e){return{}}))(y));const N=(0,d.withRouter)(w)},536:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(3144),s=n(5671),r=(n(9526),n(7586));function i(e,t){var n="undefined"!==typeof Symbol&&e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c=(0,a.default)((function e(t){(0,s.default)(this,e),this.data=t,this.next=null}));const l=function(){function e(t){(0,s.default)(this,e);var n=Math.floor(Date.now()/1e3);this.name=t,this.dateCreated=n,this.id=t+n,this.cast=[],this.crew=[],this.scenes=[],this.head=null,this.messages=new c,this.node={},this.totalNoMsgs=0,this.readerReactionMap=new Map,this.isPrivateScript=!1}return(0,a.default)(e,[{key:"updateScriptName",value:function(e){this.name=e,this.updateIsPrivateScript()}},{key:"updateIsPrivateScript",value:function(){this.name.startsWith("yyyy")&&(this.isPrivateScript=!0)}},{key:"numberOfMessages",value:function(){for(var e=0,t=this.head;t;)e++,t=t.next;return e}},{key:"getScenes",value:function(){return this.scenes}},{key:"updateReaderReaction",value:function(e,t){this.readerReactionMap.has(t)||this.readerReactionMap.set(t,[]),this.readerReactionMap.get(t).push(e),this.updateScriptFirebase()}},{key:"getReaderReactionMap",value:function(){return this.readerReactionMap}},{key:"getTotalNumScenes",value:function(){return this.getScenes().length}},{key:"deleteScript",value:function(){this.head=null}},{key:"getLastMessage",value:function(){for(var e=this.head;e.next;)e=e.next;return e.data.content}},{key:"getFirstMessage",value:function(){return this.head}},{key:"addNewMessage",value:function(e){this.totalNoMsgs+=1,e.MsgIndex=this.totalNoMsgs;var t=new c(e);if(!this.head)return this.head=t,this.head;for(var n=this.head;n.next;)n=n.next;n.next=t}},{key:"deleteMessage",value:function(e){if(this.head.data.id===e)this.head=this.head.next;else for(var t=this.head;t.next;){if(t.next.data.id===e){t.next=t.next.next;break}t=t.next}return this.head}},{key:"getNthMessage",value:function(e){e-=1;for(var t=this.head,n=0;n<e;n++){if(!t)return"";t=t.next}return t.data.content}},{key:"getNthMessageNode",value:function(e){e-=1;for(var t=this.head,n=0;n<e;n++){if(!t.next)return"";t=t.next}return t?t.data:null}},{key:"getAllMessagesStringList",value:function(){for(var e=[],t=this.head;t;)e.push(t.data.content),t=t.next;return e}},{key:"getAllMessagesStringListBySenderId",value:function(e){for(var t=[],n=this.head;n;)n.data.senderId==e&&t.push(n.data),n=n.next;return t}},{key:"getOnlyTextMsgsAsNodes",value:function(){for(var e=[],t=this.head;t;)"textMsg"==t.data.msgType&&e.push(t.data),t=t.next;return e}},{key:"getOnlyCommentsAsNodes",value:function(){for(var e=[],t=this.head;t;)"comment"==t.data.msgType&&e.push(t.data),t=t.next;return e}},{key:"getCommentByCastIdMsgId",value:function(e,t){var n=this.getOnlyCommentsAsNodes().find((function(n){return n.whoCommentedMsg===e&&n.idOfMsgCommented===t}));return n?n.content:""}},{key:"getCommentNodeByCastIdMsgId",value:function(e,t){return this.getOnlyCommentsAsNodes().find((function(n){return n.whoCommentedMsg===e&&n.idOfMsgCommented===t}))}},{key:"editNodeContent",value:function(e,t){for(var n=this.head;n;){if(n.data.id===e){n.data.content=t;break}n=n.next}this.updateScriptFirebase()}},{key:"getOnlyLikedMsgsAsNodes",value:function(){for(var e=[],t=this.head;t;)"like"==t.data.msgType&&e.push(t.data),t=t.next;return e}},{key:"getAllMessagesAsNodes",value:function(){for(var e=[],t=this.head;t;)e.push(t.data),t=t.next;return e}},{key:"getSenderNameFromID",value:function(e){var t=this.getAllCast().concat(this.getAllCrew()).find((function(t){return t.id===e}));return t?t.name:""}},{key:"sendScriptToFirebase",value:function(){var e={id:this.id,name:this.name,dateCreated:this.dateCreated,cast:this.getAllCast(),crew:this.getAllCrew(),messages:this.getAllMessagesAsNodes(),scenes:this.getAllScenes(),isPrivateScript:this.isPrivateScript};r.default.createNewScript(e)}},{key:"updateCast",value:function(e){this.cast=e}},{key:"updateScene",value:function(e){this.scenes=e}},{key:"isEmptyScript",value:function(){return"NewScript"==this.name}},{key:"updateScriptFirebase",value:function(){if(!this.isEmptyScript()){var e={id:this.id,name:this.name,dateCreated:this.dateCreated,cast:this.getAllCast(),crew:this.getAllCrew(),messages:this.getAllMessagesAsNodes(),scenes:this.getAllScenes(),readerReactionMap:JSON.stringify(Object.fromEntries(this.readerReactionMap)),isPrivateScript:this.isPrivateScript};r.default.updateScript(e)}}},{key:"removeCast",value:function(e){var t=[];this.cast.forEach((function(n){n.id!=e.id&&t.push(n)})),this.cast=t}},{key:"addNewCrew",value:function(e){this.crew.push(e)}},{key:"getAllCast",value:function(){return this.cast}},{key:"getAllScenes",value:function(){return this.scenes}},{key:"getCastIdToName",value:function(){for(var e,t=new Map,n=i(this.getAllCast);!(e=n()).done;){var a=e.value;t.set(a.id,a.name)}return t}},{key:"getAllCrew",value:function(){return this.crew}},{key:"removeCrew",value:function(e){var t=[];this.crew.forEach((function(n){n.id!=e.id&&t.push(n)})),this.crew=t}},{key:"getScriptName",value:function(){return this.name}},{key:"grabScriptFromFirebase",value:function(e){var t=this;return new Promise((function(n){r.default.getScriptById(e).then((function(e){if(e.messages)for(var n=e.messages,a=0;a<n.length;a++)t.addNewMessage(n[a]);var s=new Map;if(e.readerReactionMap){var r=JSON.parse(e.readerReactionMap);s=new Map(Object.entries(r))}t.name=e.name,t.dateCreated=e.dateCreated,t.id=e.id,t.cast=e.cast?e.cast:[],t.crew=e.crew?e.crew:[],t.scenes=e.scenes?e.scenes:[],t.readerReactionMap=s,t.isPrivateScript=!!e.isPrivateScript&&e.isPrivateScript})).then((function(){n(t)}))}))}},{key:"getNodeByMessageId",value:function(e){for(var t=this.head;t;){if(t.data.id===e)return t;t=t.next}return null}},{key:"getMsgType",value:function(e){var t=getNodeByMessageId(e);return t.msgType?t.msgType:"textMsg"}}]),e}()},7586:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(3144),s=n(5671),r=n(2805),i=n.n(r);const o=new((0,a.default)((function e(){(0,s.default)(this,e),this.getScripts=function(){return new Promise((function(e){i().database().ref("/scripts/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getFylds=function(){return new Promise((function(e){i().database().ref("/fylds/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.createFyld=function(e){return new Promise((function(t){i().database().ref("/fylds/"+e.name.replace(/\s/g,"")+"/").set({name:e.name,dateCreated:e.dateCreated,description:e.description,image:e.image,friends:e.friends}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createGrypcht=function(e){return new Promise((function(t){i().database().ref("/grypchts/"+e.id+"/").set({id:e.id,groupName:e.groupName,members:e.members,dateCreated:e.dateCreated,description:e.description,isPrivateGrypcht:e.isPrivateGrypcht}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createNewScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").set({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").update({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,scenes:e.scenes,readerReactionMap:e.readerReactionMap,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.getOpenAIAPI=function(){return new Promise((function(e){i().database().ref("/openAIAPI/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getConversationHistory=function(){return new Promise((function(e){i().database().ref("/conversationHistory/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.postChats=function(e,t,n,a,s){return new Promise((function(r){i().database().ref("/chats/"+e+"/"+a+"/"+t+"/").push({content:n,timestamp:Date.now(),uid:s}).then((function(){r(!0)})).catch((function(e){r({})}))}))},this.storage=function(){return i().storage()},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getScriptById=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e).once("value").then((function(e){e.val()?t(Object(e.val())):t({})}))}))},this.updateSenTitle=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/").update({senTitle:e.newSenTitle}).then((function(n){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId).remove().then((function(){t(!0)})).catch((function(e){console.log("error",e)}))})).then((function(e){t(!0)})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("error",e)}))}))},this.sendForApproval=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId+"/").set(e).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateVideoSnippetURL=function(e,t){return new Promise((function(n){i().database().ref("/orders/"+e+"/").update({snippetVideoURL:t}).then((function(e){console.log("response",e),n(!0)})).catch((function(e){console.log("error",e)}))}))}})))}}]);
//# sourceMappingURL=725.8bb21574.chunk.js.map