"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[165],{1165:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(5671),r=n(3144),s=n(7326),i=n(136),c=n(2963),o=n(1120),u=n(9526),l=n(2246),f=n(9934),d=n(7586),h=n(4579);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,o.default)(e);if(t){var r=(0,o.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,i.default)(n,e);var t=p(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,e)).state={searchBarUp:!1,results:[],searchTerm:"",scripts:[]},r.handleFocus=r.handleFocus.bind((0,s.default)(r)),r.handleBlur=r.handleBlur.bind((0,s.default)(r)),r.handleSearch=r.handleSearch.bind((0,s.default)(r)),r.selectResult=r.selectResult.bind((0,s.default)(r)),r}return(0,r.default)(n,[{key:"componentDidMount",value:function(){var e=this;d.default.getScripts().then((function(t){e.setState({scripts:t,results:t})}))}},{key:"handleSearch",value:function(e){if(this.setState({searchTerm:e.target.value}),this.state.scripts){var t=this.state.scripts.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));this.setState({results:t})}else console.log("data is not defined");""==e.target.value&&this.setState({results:this.state.scripts})}},{key:"handleFocus",value:function(){this.setState({searchBarUp:!0})}},{key:"handleBlur",value:function(){this.state.results.length||this.setState({searchBarUp:!1})}},{key:"selectResult",value:function(e,t){if(t){var n=prompt("Please enter master password to read private","");null!=n&&"7779"==n&&this.props.history.push({pathname:"/readerview/"+e})}else this.props.history.push({pathname:"/readerview/"+e})}},{key:"render",value:function(){var e=this;return u.createElement("div",{className:"SearchScripts-scripts"},u.createElement("div",{className:"SearchScripts-bar",style:{top:this.state.searchBarUp?"-40%":"-30%"}},u.createElement("input",{type:"text",placeholder:"what are you ryeading?",onChange:this.handleSearch,onFocus:this.handleFocus,onBlur:this.handleBlur})),u.createElement("div",{className:"SearchScripts-results"},u.createElement("p",{className:"SearchScripts-resultCount"},this.state.results.length," movies"),this.state.results.map((function(t){return u.createElement("div",{className:"SearchScripts-eachResult",key:t.id,onClick:function(){return e.selectResult(t.id,t.isPrivateScript)}},u.createElement("h3",null,t.name),u.createElement("p",{className:"SearchScripts-eachResult-dateCreated"},(0,h.ConvertSecondsToDate)(t.dateCreated)))}))))}}]),n}(u.Component),m=(0,f.withRouter)((0,l.connect)((function(e){return{}}))(v));const g=(0,f.withRouter)(m)},7586:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(3144),r=n(5671),s=n(2805),i=n.n(s);const c=new((0,a.default)((function e(){(0,r.default)(this,e),this.getScripts=function(){return new Promise((function(e){i().database().ref("/scripts/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getFylds=function(){return new Promise((function(e){i().database().ref("/fylds/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.createFyld=function(e){return new Promise((function(t){i().database().ref("/fylds/"+e.name.replace(/\s/g,"")+"/").set({name:e.name,dateCreated:e.dateCreated,description:e.description,image:e.image,friends:e.friends}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.createNewScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").set({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateScript=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e.id+"/").update({id:e.id,name:e.name,dateCreated:e.dateCreated,cast:e.cast,crew:e.crew,messages:e.messages,scenes:e.scenes,readerReactionMap:e.readerReactionMap,isPrivateScript:e.isPrivateScript}).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.getOpenAIAPI=function(){return new Promise((function(e){i().database().ref("/openAIAPI/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getConversationHistory=function(){return new Promise((function(e){i().database().ref("/conversationHistory/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.postChats=function(e,t,n,a,r){return new Promise((function(s){i().database().ref("/chats/"+e+"/"+a+"/"+t+"/").push({content:n,timestamp:Date.now(),uid:r}).then((function(){s(!0)})).catch((function(e){s({})}))}))},this.storage=function(){return i().storage()},this.getRimiSenTitles=function(){return new Promise((function(e){i().database().ref("/rimiLyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.getScriptById=function(e){return new Promise((function(t){i().database().ref("/scripts/"+e).once("value").then((function(e){e.val()?t(Object(e.val())):t({})}))}))},this.updateSenTitle=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/").update({senTitle:e.newSenTitle}).then((function(n){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId).remove().then((function(){t(!0)})).catch((function(e){console.log("error",e)}))})).then((function(e){t(!0)})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("error",e)}))}))},this.sendForApproval=function(e){return new Promise((function(t){i().database().ref("/rimis/"+e.id+"/updates/"+e.updateId+"/").set(e).then((function(e){console.log("response",e),t(!0)})).catch((function(e){console.log("error",e)}))}))},this.updateVideoSnippetURL=function(e,t){return new Promise((function(n){i().database().ref("/orders/"+e+"/").update({snippetVideoURL:t}).then((function(e){console.log("response",e),n(!0)})).catch((function(e){console.log("error",e)}))}))}})))}}]);
//# sourceMappingURL=165.e7f250fe.chunk.js.map